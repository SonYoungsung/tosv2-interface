"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1481],{27541:function(e,n,t){var r=t(85893),o=t(48940),i=t(45161),a=t(93717),l=t(82140),c=t(33090),u=t(71293),s=t(32735),d=t(14225),f=t(60938),b=t(27520),p=t(67294);function g(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function m(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){g(e,n,t[n])}))}return e}n.Z=function(e){e.placeHolder;var n=e.w,t=e.h,x=e.isDisabled,v=e.atomKey,h=e.isError,y=e.style,j=e.pageKey,P=e.recoilKey,S=e.maxValue,k=e.errorMsg,O=(e.rightUnit,e.minValue,e.leftDays),w=e.leftTime,N=e.isDisabledText,D=e.endTime,C=e.isManageModal,M=((0,o.F)(),(0,i.If)().colorMode),z=(0,p.useState)("Weeks"),I=z[0],Z=z[1],T=(0,p.useState)(!1),$=T[0],A=T[1],W=(0,p.useState)(!1),E=(W[0],W[1],(0,b.Z)().bp700px),_=(0,f.Z)(j,P),B=_.inputValue,K=_.value,V=_.setValue,G=(0,p.useMemo)((function(){return K&&v&&K[v]?K[v]<10?"27px":K[v]&&K[v]<100?"37px":"42px":"27px"}),[K,v]);return(0,r.jsxs)(a.k,m({flexDir:"column",pos:"relative"},y,{children:[(0,r.jsxs)(l.B,{children:[(0,r.jsx)(c.I,{isInvalid:h,isDisabled:x,w:n||270,h:t||45,ml:"auto",borderRadius:8,borderWidth:1,borderColor:"light"===M?"#e8edf2":"#313442",fontSize:14,color:!1===$?"#64646f":"light"===M?"gray.800":x?"#64646f":"#f1f1f1",_placeholder:{color:"#64646f"},_hover:{borderColor:"light"===M?"#c6cbd9":"#535353"},focusBorderColor:"none",_focus:h?{}:{outline:"none",color:"light"===M?"gray.800":"#f1f1f1",boxShadow:"",borderColor:"light"===M?"#9a9aaf":"#8a8a98"},outline:"none",errorBorderColor:x?"none":"#e23738",value:"".concat(x?N||"-":K[v]),onChange:function(e){if(!isNaN(e.target.value)&&!e.target.value.includes(".")&&!e.target.value.includes(" "))return 0===Number(e.target.value)&&(console.log("-1-"),Z("Weeks"),A(!1)),Number(e.target.value)>1&&(console.log("-2-"),Z("Weeks"),A(!0)),1===Number(e.target.value)&&(console.log("-3-"),Z("Week"),A(!0)),V(m({},B,g({},v,e.target.value)))}}),(0,r.jsx)(a.k,{pos:"absolute",left:G,textAlign:"center",lineHeight:"39px",fontSize:14,children:(!1===x||!0===C)&&O&&w&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.x,{color:!1===$?"#64646f":"light"===M?"gray.800":x?"#64646f":"#f1f1f1",children:I}),(0,r.jsxs)(u.x,{fontSize:12,ml:"9px",mr:"3px",color:$?"dark"===M?"#8b8b93":"#7e7e8f":"",children:[O," ",1===Number(O)?"Day":"Days"," ",w]})]})}),(0,r.jsx)(s.x,{mr:"8px",display:"flex",alignItems:"center",children:(0,r.jsx)(d.z,{w:"30px",h:"20px",color:"dark"===M?"#64646f":"#7e7e8f",_hover:{color:"#2775ff"},bg:"none",fontSize:14,fontWeight:600,isDisabled:x,onClick:function(){B[v]!==S&&S&&V(m({},B,g({},v,S)))},children:"Max"})})]}),h&&!1===x&&(0,r.jsx)(a.k,{w:"100%",fontSize:12,color:"#e23738",pos:"absolute",mt:"40px",textAlign:"right",justifyContent:"center",children:(0,r.jsx)(u.x,{children:k})}),D&&(0,r.jsx)(a.k,{pos:"absolute",top:"48px",w:n||270,justifyContent:E?"flex-start":"center",children:(0,r.jsxs)(u.x,{children:["End Time : ",D]})})]}))}},35418:function(e,n,t){t.d(n,{$:function(){return c},K:function(){return l}});var r=t(68806);function o(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function i(){var e=o(["\n  query GetDashboard($period: String!, $limit: Int!) {\n    getDashboard(period: $period, limit: $limit) {\n      _id\n      chainId\n      createdAt\n      marketCap\n      runway\n      tosPrice\n      tosSupply\n      sTosSupply\n      lTosSupply\n      totalValueStaked\n      treasuryBalance\n      updatedAt\n    }\n  }\n"]);return i=function(){return e},e}function a(){var e=o(["\n  query GetDashboardCard($period: String!, $limit: Int!) {\n    getDashboardCard(period: $period, limit: $limit) {\n      tosPrice\n      backingPerTos\n      ltosPrice\n      mintingRate\n      ltosIndex\n      chainId\n    }\n  }\n"]);return a=function(){return e},e}var l=(0,r.Ps)(i()),c=(0,r.Ps)(a())},66028:function(e,n,t){function r(){var e,n,t=(e=["\n  query GetTokenPrice($tokenId: String!) {\n    getTokenPrice(tokenId: $tokenId) {\n      price\n    }\n  }\n"],n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}})));return r=function(){return t},t}t.d(n,{N:function(){return o}});var o=(0,t(68806).Ps)(r())},81271:function(e,n,t){var r=t(34051),o=t.n(r),i=t(37243),a=t(67294),l=t(35418),c=t(76312),u=t(45093),s=t(68462),d=t(79102),f=t(77044),b=t(35553),p=t(2593),g=t(50266),m=t(88586);function x(e,n,t,r,o,i,a){try{var l=e[i](a),c=l.value}catch(u){return void t(u)}l.done?n(c):Promise.resolve(c).then(r,o)}function v(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var i=e.apply(n,t);function a(e){x(i,r,o,a,l,"next",e)}function l(e){x(i,r,o,a,l,"throw",e)}a(void 0)}))}}n.Z=function(){var e=(0,i.Z)().selectedModalData,n=(0,a.useState)(void 0),t=n[0],r=n[1],x=(0,a.useState)(void 0),h=(x[0],x[1],(0,c.aM)(l.K,{variables:{period:"-1",limit:1},pollInterval:1e4})),y=(h.loading,h.error,h.data),j=(0,s.Z)(),P=j.BondDepositoryProxy_CONTRACT,S=j.StakingV2Proxy_CONTRACT,k=(0,f.Ge)(),O=(0,g.Z)().priceData,w=(m.Z.mainnetGasPrice,m.Z.minBondGasPrice);return(0,a.useEffect)((function(){function n(){return(n=v(o().mark((function n(){var t,i,a,l,c,s,f,g,m,x,v,h,j,N,D;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(e&&y&&O&&P)){n.next=28;break}return n.next=4,P.viewMarket(e.index);case 4:return i=n.sent,n.next=7,null===P||void 0===P?void 0:P.purchasableAssetAmountAtOneTime(i.tosPrice,i.maxPayout);case 7:return a=n.sent,n.next=10,null===S||void 0===S?void 0:S.possibleIndex();case 10:return l=n.sent,n.next=13,P.getBonds();case 13:return c=n.sent,n.next=16,null===(t=k.library)||void 0===t?void 0:t.getGasPrice();case 16:s=n.sent,Number(b.bM(s,9)),f=(0,d.WN)({amount:null===a||void 0===a?void 0:a.toString()}),g=(0,d.WN)({amount:null===l||void 0===l?void 0:l.toString()}),m=c[4],x=1/Number(m.toString())*1e18*O.ethPrice,v=(0,u.Z)(y.getDashboard[0].tosPrice),h=Number(v)-Number(e.bondingPrice)/(100*Number(v)),j=Number(e.discountRate.replaceAll("%",""))/100,N=p.O$.from((0,d.Az)(w)).mul(s).div((0,d.Az)(j.toString())),D=(0,d.WN)({amount:N.toString(),decimalPoints:6,decimalPlaces:6}),r({bondPrice:"$".concat((0,u.Z)(x)),marketPrice:"$".concat(v),discount:"".concat((0,u.Z)(h),"%"),minBond:"".concat(Number(D)<0?"0.000000":D),maxBond:"".concat((0,u.Z)(f)),ltosIndex:"".concat((0,u.Z)(g))});case 28:case"end":return n.stop()}}),n)})))).apply(this,arguments)}try{!function(){n.apply(this,arguments)}()}catch(t){console.log("**useBondModal err**"),console.log(t)}}),[e,y,P,S,null===k||void 0===k?void 0:k.library,O,w]),{bondModalData:t}}},50266:function(e,n,t){var r=t(76312),o=t(35418),i=t(66028),a=t(67294);n.Z=function(){var e=(0,a.useState)(void 0),n=e[0],t=e[1],l=(0,r.aM)(o.K,{variables:{period:"-1",limit:1}}),c=(l.loading,l.error,l.data),u=(0,r.aM)(i.N,{variables:{tokenId:"ethereum"}}).data;return(0,a.useEffect)((function(){if(c&&u){var e,n=(null===(e=c.getDashboard[0])||void 0===e?void 0:e.tosPrice)||"0",r=u.getTokenPrice.price;t({tosPrice:Number(n),ethPrice:Number(r)})}}),[c,u]),{priceData:n}}},60316:function(e,n,t){t.r(n);var r=t(85893),o=t(45161),i=t(93717),a=t(85129),l=t(38658),c=t(88586),u=t(60938),s=t(67294);function d(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function f(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){d(e,n,t[n])}))}return e}n.default=function(e){var n=e.pageKey,t=e.subKey,b=e.periodKey,p=e.balanceKey,g=e.isSlideDisabled,m=e.minValue,x={mt:"2",ml:"-2.5",fontSize:"sm"},v=(0,u.Z)(n,t),h=v.inputValue,y=(v.value,v.setValue),j=(0,s.useState)(0),P=j[0],S=j[1],k=(0,s.useState)(!1),O=k[0],w=(k[1],(0,o.If)().colorMode),N=(0,s.useState)(!1),D=N[0],C=N[1];return(0,s.useEffect)((function(){0!==P&&C(!0)}),[P]),(0,s.useEffect)((function(){var e;if(p&&D&&(""===h[p]||void 0===h[p]))return y(f({},h,(d(e={},p,0),d(e,b,P),e)));return y(f({},h,d({},b,P)))}),[P,b,p,D]),(0,s.useEffect)((function(){if(h[b])return S(Number(h[b]))}),[h,b]),(0,s.useEffect)((function(){return S(g?0:c.Z.modalMaxWeeks)}),[g]),(0,r.jsx)(i.k,{w:"100%",h:"70px",pos:"relative",children:(0,r.jsxs)(a.iR,{focusThumbOnChange:!1,"aria-label":"slider-ex-1",defaultValue:0,min:0,max:c.Z.modalMaxWeeks,value:P,onChange:function(e){return S(m&&m>e?m:e)},h:"10px",alignSelf:"end",isDisabled:g,children:[(0,r.jsx)(a.jz,f({value:0},x,{children:"7d"})),(0,r.jsx)(a.jz,f({value:52},x,{children:"1y"})),(0,r.jsx)(a.jz,f({value:104},x,{children:"2y"})),(0,r.jsx)(a.jz,f({value:155},x,{children:"3y"})),(0,r.jsxs)(a.Uj,{bg:"light"===w?"#e7edf3":"#353d48",children:[(0,r.jsx)(a.Ms,{bg:"#2775ff"}),m&&(0,r.jsx)(a.Ms,{maxW:"".concat(m/155*100,"%"),bg:"#2bb415"})]}),(0,r.jsx)(l.u,{color:"light"===w?"#07070c":"#f1f1f1",placement:"top",bg:"transparent",w:"50px",display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",fontSize:"15px",fontWeight:600,isOpen:O,label:"".concat(P," sTOS"),children:(0,r.jsx)(a.gs,{})})]})})}}}]);