"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2498],{52498:function(e,t,n){n.r(t),n.d(t,{default:function(){return z}});var a=n(34051),r=n.n(a),o=n(85893),s=n(45161),u=n(93717),i=n(71293),l=n(48940),c=n(35541),x=n(19778),d=n(14581),p=n(54346),f=n(4480),k=n(54968),m=n(37243),h=n(25675),v=n.n(h),b=n(79822),_=n(60483),y=n(67294),j=n(50482),w=n(26882),S=n(29619),g=n(68462),T=n(79042),C=n(46850),I=n(60938);function M(e,t,n,a,r,o,s){try{var u=e[o](s),i=u.value}catch(l){return void n(l)}u.done?t(i):Promise.resolve(i).then(a,r)}function O(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function s(e){M(o,a,r,s,u,"next",e)}function u(e){M(o,a,r,s,u,"throw",e)}s(void 0)}))}}var Z=function(e){var t=(0,y.useState)(void 0),n=t[0],a=t[1],o=(0,y.useState)(void 0),s=o[0],u=o[1],i=(0,y.useState)(void 0),l=i[0],c=i[1],x=(0,g.Z)().StakingV2Proxy_CONTRACT,d=(0,I.Z)("Stake_screen","unstake_modal").inputValue,p=(0,C.Z)().stakeV2;return(0,y.useEffect)((function(){function t(){return(t=O(r().mark((function t(){var n,o;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!x||!e){t.next=7;break}return t.next=3,x.remainedLtos(e);case 3:if(n=t.sent,!(o=(0,T.WN)({amount:n.toString(),round:!1}))){t.next=7;break}return t.abrupt("return",a({maxValue:o}));case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}(function(){return t.apply(this,arguments)})().catch((function(e){}))}),[e,x]),(0,y.useEffect)((function(){function e(){return(e=O(r().mark((function e(){var t,n,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(x&&d.stake_unstakeModal_balance&&(null===p||void 0===p?void 0:p.ltosIndexBN))){e.next=9;break}if(""!==d.stake_unstakeModal_balance){e.next=3;break}return e.abrupt("return",u("0"));case 3:return t=(0,T.Az)(d.stake_unstakeModal_balance),e.next=6,x.getLtosToTosPossibleIndex(t);case 6:return n=e.sent,a=(0,T.WN)({amount:n.toString(),localeString:!0}),e.abrupt("return",u(a||"0"));case 9:return e.abrupt("return",u("0"));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(function(){return e.apply(this,arguments)})().catch((function(e){}))}),[x,d.stake_unstakeModal_balance,p]),(0,y.useEffect)((function(){function t(){return(t=O(r().mark((function t(){var n,a,o;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!x||!(null===p||void 0===p?void 0:p.ltosIndexBN)){t.next=9;break}return t.next=3,x.remainedLtos(e);case 3:return n=t.sent,t.next=6,x.getLtosToTosPossibleIndex(n);case 6:return a=t.sent,o=(0,T.WN)({amount:a.toString(),localeString:!0}),t.abrupt("return",c(o));case 9:return t.abrupt("return",u("0"));case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}(function(){return t.apply(this,arguments)})().catch((function(e){}))}),[x,e,p]),{unstakeData:n,youWillGet:s,youWillGetMax:l}},N=n(45093),L=n(43382),V=n(57683),D=n(36192),W=n(45379),E=n(27520);function G(e,t,n,a,r,o,s){try{var u=e[o](s),i=u.value}catch(l){return void n(l)}u.done?t(i):Promise.resolve(i).then(a,r)}function P(e){var t=(0,s.If)().colorMode,n=e.title,a=e.content;return(0,o.jsx)(u.k,{children:(0,o.jsxs)(u.k,{w:"100%",justifyContent:"space-between",fontSize:14,children:[(0,o.jsx)(i.x,{color:"dark"===t?"gray.100":"gray.1000",children:n}),(0,o.jsx)(i.x,{color:"dark"===t?"white.200":"gray.800",fontWeight:600,children:a})]})})}var z=function(){var e,t=(0,f.sJ)(k.ZC),n=((0,l.F)(),(0,s.If)().colorMode),a=(0,m.Z)(),h=a.closeModal,C=a.selectedModalData,M=a.isModalLoading,O=a.modalSectionMtValue,z=(0,y.useState)(!1),A=z[0],B=z[1],R=((0,S.Z)().userLTOSBalance,(0,I.Z)("Stake_screen","unstake_modal")),F=R.inputValue,K=R.setResetValue,Y=(0,g.Z)().StakingV2Proxy_CONTRACT,U=Z(null===C||void 0===C?void 0:C.stakedId),H=U.unstakeData,J=U.youWillGet,q=U.youWillGetMax,Q=(0,L.Z)().simpleStakingId,X=(0,V.Z)().setTx,$=(0,E.Z)().bp700px,ee=(0,D.Z)().ltosIndex,te=(0,W.Z)(":"),ne=[{title:"You Give",content:"".concat(A?(0,N.Z)(F.stake_unstakeModal_balance)||"0":(null===H||void 0===H?void 0:H.maxValue)||"0"," LTOS")},{title:"You Will Get",content:"".concat(A?J||"0":q||"0"," TOS")}],ae=(0,y.useCallback)((function(){K(),h()}),[K,h]),re=(0,y.useCallback)((e=r().mark((function e(){var t,n,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Y){e.next=17;break}if(!A||!Q){e.next=10;break}return t=(0,T.Az)(F.stake_unstakeModal_balance),console.log("--claimForSimpleType(uint256 _stakeId, uint256 _claimAmount)--"),console.log(Q,t),e.next=7,Y.claimForSimpleType(Q,t);case 7:return n=e.sent,X(n),e.abrupt("return",ae());case 10:return console.log("--unstake(uint256 _stakeId)--"),console.log(null===C||void 0===C?void 0:C.stakedId),e.next=14,Y.unstake(null===C||void 0===C?void 0:C.stakedId);case 14:return a=e.sent,X(a),e.abrupt("return",ae());case 17:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function s(e){G(o,a,r,s,u,"next",e)}function u(e){G(o,a,r,s,u,"throw",e)}s(void 0)}))}),[A,Y,F.stake_unstakeModal_balance,C,Q,ae,X]);return(0,y.useEffect)((function(){return C&&C.hasInput?B(!0):B(!1)}),[C]),(0,o.jsxs)(c.u_,{isOpen:"stake_unstake_modal"===t,isCentered:!0,onClose:ae,children:[(0,o.jsx)(x.Z,{className:"modalOverlayDrawer",bg:"none"}),(0,o.jsx)(d.h,{bg:"light"===n?"white.100":"#121318",minW:$?"350px":"700px",maxW:$?"350px":"700px",mt:O,children:(0,o.jsx)(p.f,{px:0,pt:"30px",pb:"40px",children:(0,o.jsxs)(u.k,{w:"100%",flexDir:"column",children:[(0,o.jsx)(u.k,{flexDir:"column",pos:"relative",children:(0,o.jsxs)(u.k,{w:"100%",justifyContent:"center",mb:"33px",children:[(0,o.jsx)(i.x,{color:"light"===n?"gray.800":"white.200",fontSize:20,fontWeight:600,children:"Unstake"}),(0,o.jsx)(u.k,{pos:"absolute",right:"1.56em",cursor:"pointer",onClick:function(){return ae()},children:(0,o.jsx)(v(),{src:b.default,alt:"CLOSE_ICON"})})]})}),(0,o.jsxs)(u.k,{w:"100%",flexDir:"column",mb:"30px",children:[(0,o.jsxs)(u.k,{w:"100%",flexDir:"column",px:$?"20px":"120px",mb:$?"9px":"30px",children:[(0,o.jsxs)(u.k,{w:"100%",justifyContent:$?"center":"space-between",mb:$?"15px":"9px",flexDir:$?"column":"row",alignItems:"center",children:[(0,o.jsx)(j.default,{title:"Next Rebase",content:te,tooltip:"Time left until LTOS index is increased."}),(0,o.jsx)(j.default,{title:"LTOS Index",content:ee,symbol:"TOS",tooltip:"Number of TOS you get when you unstake 1 LTOS. LTOS index increases every 8 hours."})]}),A&&(0,o.jsxs)(u.k,{flexDir:"column",children:[(0,o.jsx)(u.k,{mb:"9px",children:(0,o.jsx)(w.v,{w:"100%",h:45,pageKey:"Stake_screen",recoilKey:"unstake_modal",placeHolder:"Enter an amount of LTOS",atomKey:"stake_unstakeModal_balance",maxValue:Number(null===H||void 0===H?void 0:H.maxValue)||0})}),(0,o.jsxs)(u.k,{fontSize:12,color:"dark"===n?"#8b8b93":"gray.1000",h:"17px",justifyContent:"space-between",px:"6px",mb:$?"24px":"",children:[(0,o.jsx)(i.x,{children:"Your Balance"}),(0,o.jsxs)(i.x,{children:[(null===H||void 0===H?void 0:H.maxValue)||"0"," LTOS"]})]})]})]}),(0,o.jsx)(u.k,{flexDir:"column",rowGap:"9px",px:$?"20px":"50px",children:ne.map((function(e,t){return(0,o.jsx)(P,{title:e.title,content:e.content},e.title+t)}))})]}),(0,o.jsx)(u.k,{flexDir:"column",alignItems:"center",rowGap:"15px",children:(0,o.jsx)(_.Z,{w:$?310:460,h:42,name:"Unstake",onClick:re,isDisabled:M||!!(null===H||void 0===H?void 0:H.maxValue)&&F.stake_unstakeModal_balance>Number(H.maxValue)})})]})})})]})}}}]);