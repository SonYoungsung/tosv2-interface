"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7381],{35418:function(e,n,t){t.d(n,{$:function(){return u},K:function(){return c}});var r=t(68806);function o(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function i(){var e=o(["\n  query GetDashboard($period: String!, $limit: Int!) {\n    getDashboard(period: $period, limit: $limit) {\n      _id\n      chainId\n      createdAt\n      marketCap\n      runway\n      tosPrice\n      tosSupply\n      sTosSupply\n      lTosSupply\n      totalValueStaked\n      treasuryBalance\n      updatedAt\n    }\n  }\n"]);return i=function(){return e},e}function a(){var e=o(["\n  query GetDashboardCard($period: String!, $limit: Int!) {\n    getDashboardCard(period: $period, limit: $limit) {\n      tosPrice\n      backingPerTos\n      ltosPrice\n      mintingRate\n      ltosIndex\n      chainId\n    }\n  }\n"]);return a=function(){return e},e}var c=(0,r.Ps)(i()),u=(0,r.Ps)(a())},66028:function(e,n,t){function r(){var e,n,t=(e=["\n  query GetTokenPrice($tokenId: String!) {\n    getTokenPrice(tokenId: $tokenId) {\n      price\n    }\n  }\n"],n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}})));return r=function(){return t},t}t.d(n,{N:function(){return o}});var o=(0,t(68806).Ps)(r())},81271:function(e,n,t){var r=t(34051),o=t.n(r),i=t(37243),a=t(67294),c=t(35418),u=t(76312),l=t(45093),s=t(68462),d=t(79102),f=t(77044),m=t(35553),v=t(2593),p=t(50266),b=t(88586);function h(e,n,t,r,o,i,a){try{var c=e[i](a),u=c.value}catch(l){return void t(l)}c.done?n(u):Promise.resolve(u).then(r,o)}function g(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var i=e.apply(n,t);function a(e){h(i,r,o,a,c,"next",e)}function c(e){h(i,r,o,a,c,"throw",e)}a(void 0)}))}}n.Z=function(){var e=(0,i.Z)().selectedModalData,n=(0,a.useState)(void 0),t=n[0],r=n[1],h=(0,a.useState)(void 0),x=(h[0],h[1],(0,u.aM)(c.K,{variables:{period:"-1",limit:1},pollInterval:1e4})),y=(x.loading,x.error,x.data),S=(0,s.Z)(),k=S.BondDepositoryProxy_CONTRACT,P=S.StakingV2Proxy_CONTRACT,Z=(0,f.Ge)(),I=(0,p.Z)().priceData,N=(b.Z.mainnetGasPrice,b.Z.minBondGasPrice);return(0,a.useEffect)((function(){function n(){return(n=g(o().mark((function n(){var t,i,a,c,u,s,f,p,b,h,g,x,S,j,w;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(e&&y&&I&&k)){n.next=28;break}return n.next=4,k.viewMarket(e.index);case 4:return i=n.sent,n.next=7,null===k||void 0===k?void 0:k.purchasableAssetAmountAtOneTime(i.tosPrice,i.maxPayout);case 7:return a=n.sent,n.next=10,null===P||void 0===P?void 0:P.possibleIndex();case 10:return c=n.sent,n.next=13,k.getBonds();case 13:return u=n.sent,n.next=16,null===(t=Z.library)||void 0===t?void 0:t.getGasPrice();case 16:s=n.sent,Number(m.bM(s,9)),f=(0,d.WN)({amount:null===a||void 0===a?void 0:a.toString()}),p=(0,d.WN)({amount:null===c||void 0===c?void 0:c.toString()}),b=u[4],h=1/Number(b.toString())*1e18*I.ethPrice,g=(0,l.Z)(y.getDashboard[0].tosPrice),x=Number(g)-Number(e.bondingPrice)/(100*Number(g)),S=Number(e.discountRate.replaceAll("%",""))/100,j=v.O$.from((0,d.Az)(N)).mul(s).div((0,d.Az)(S.toString())),w=(0,d.WN)({amount:j.toString(),decimalPoints:6,decimalPlaces:6}),r({bondPrice:"$".concat((0,l.Z)(h)),marketPrice:"$".concat(g),discount:"".concat((0,l.Z)(x),"%"),minBond:"".concat(Number(w)<0?"0.000000":w),maxBond:"".concat((0,l.Z)(f)),ltosIndex:"".concat((0,l.Z)(p))});case 28:case"end":return n.stop()}}),n)})))).apply(this,arguments)}try{!function(){n.apply(this,arguments)}()}catch(t){console.log("**useBondModal err**"),console.log(t)}}),[e,y,k,P,null===Z||void 0===Z?void 0:Z.library,I,N]),{bondModalData:t}}},36192:function(e,n,t){var r=t(45093),o=t(76312),i=t(77044),a=t(35418),c=t(46850),u=t(83077),l=t(67294);n.Z=function(){var e=(0,l.useState)("-"),n=e[0],t=e[1],s=(0,i.Ge)().account,d=(0,c.Z)().stakeV2,f=(0,o.aM)(a.$,{variables:{period:"-1",limit:1},pollInterval:1e4}),m=(f.loading,f.error,f.data),v=(0,u.O)().blockNumber;return(0,l.useEffect)((function(){if(s){var e=null===d||void 0===d?void 0:d.ltosIndex;if(e)return t(e)}if(m){var n=(null===m||void 0===m?void 0:m.getDashboardCard[0]).ltosIndex;return t((0,r.Z)(n,7))}}),[m,s,d,v]),{ltosIndex:n}}},17767:function(e,n,t){var r=t(88586),o=t(60938),i=t(37243),a=t(29619),c=t(67294);n.Z=function(){var e=(0,c.useState)(!1),n=e[0],t=e[1],u=(0,c.useState)(!1),l=u[0],s=u[1],d=(0,c.useState)(!0),f=d[0],m=d[1],v=(0,c.useState)(!1),p=v[0],b=v[1],h=(0,a.Z)().userTOSBalance,g=(0,i.Z)().isModalLoading,x=(0,o.Z)("Stake_screen","stake_modal").inputValue,y=x.stake_modal_balance,S=x.stake_modal_period,k=r.Z.modalMaxWeeks;return(0,c.useEffect)((function(){return g?(t(!1),b(!1)):void 0===y||0===y.length||Number(y)<=0?(b(!0),t(!1)):h&&y?Number(y)>Number(h.replaceAll(",",""))?(b(!1),t(!0)):(b(!1),t(!1)):function(){b(!1),t(!1)}}),[y,h,g]),(0,c.useEffect)((function(){return Number(S)>k||Number(S)<0||0===S.length?s(!0):s(!1)}),[S,k,g]),(0,c.useEffect)((function(){m(n||l||p)}),[n,l,p]),{inputOver:n,inputPeriodOver:l,zeroInputBalance:p,btnDisabled:f}}},50266:function(e,n,t){var r=t(76312),o=t(35418),i=t(66028),a=t(67294);n.Z=function(){var e=(0,a.useState)(void 0),n=e[0],t=e[1],c=(0,r.aM)(o.K,{variables:{period:"-1",limit:1}}),u=(c.loading,c.error,c.data),l=(0,r.aM)(i.N,{variables:{tokenId:"ethereum"}}).data;return(0,a.useEffect)((function(){if(u&&l){var e,n=(null===(e=u.getDashboard[0])||void 0===e?void 0:e.tosPrice)||"0",r=l.getTokenPrice.price;t({tosPrice:Number(n),ethPrice:Number(r)})}}),[u,l]),{priceData:n}}},45379:function(e,n,t){var r=t(88586),o=t(67294),i=t(5555);n.Z=function(e){var n=(0,o.useState)("-"),t=n[0],a=n[1],c=r.Z.rebase,u=c.epochLength,l=c.beginEpochEnd;return(0,o.useEffect)((function(){setInterval((function(){var n=(0,i.kv)(),t=u-(n-l)%u,r=(0,i.g9)(n-l>0?t:l-n,"HH:mm:ss"),o=r.hours,c=r.mins,s=r.secs,d=1===o.toString().length?"0".concat(r.hours):"".concat(r.hours),f=1===c.toString().length?"0".concat(r.mins):"".concat(r.mins),m=1===s.toString().length?"0".concat(r.secs):"".concat(r.secs);return(0,i.Ze)(),a(e?"".concat(d).concat(e).concat(f).concat(e).concat(m):"".concat(d,".").concat(f,".").concat(m))}),1e3)}),[]),t}},50482:function(e,n,t){t.r(n);var r=t(85893),o=t(45161),i=t(18618),a=t(57747),c=t(93717),u=t(71293),l=t(95787),s=t(37243),d=t(98253);function f(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function m(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,i=[],a=!0,c=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(i.push(r.value),!n||i.length!==n);a=!0);}catch(u){c=!0,o=u}finally{try{a||null==t.return||t.return()}finally{if(c)throw o}}return i}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return f(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return f(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.default=function(e){var n=e.title,t=e.content,f=e.symbol,v=e.tooltip,p=e.isWarning,b=(0,o.If)().colorMode,h=m((0,i.a)("(max-width: 1024px)"),1)[0],g=(0,s.Z)().isModalLoading;return(0,r.jsxs)(a.xu,{display:"flex",flexDir:"column",w:h?"155px":"152px",alignItems:"center",mb:"15px",children:[(0,r.jsxs)(c.k,{alignItems:"center",mb:"6px",children:[(0,r.jsx)(u.x,{color:"dark"===b?"gray.100":"gray.1000",h:"17px",fontWeight:600,fontSize:12,textAlign:"center",mr:"6px",children:n}),(0,r.jsx)(l.Z,{label:v})]}),(0,r.jsx)(c.k,{fontWeight:600,justifyContent:"center",h:h?"28px":"25px",children:g?(0,r.jsx)(c.k,{w:"100px",h:"30px",children:(0,r.jsx)(d.default,{})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.x,{color:p?"red.100":"dark"===b?"white.100":"gray.800",fontSize:18,mr:2,children:t||"-"}),(0,r.jsx)(u.x,{color:"dark"===b?"white.200":"gray.800",fontSize:12,lineHeight:"33px",children:f||""})]})})]})}}}]);