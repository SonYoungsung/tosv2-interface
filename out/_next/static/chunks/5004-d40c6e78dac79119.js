"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5004],{36192:function(e,t,n){var r=n(45093),a=n(76312),o=n(77044),l=n(35418),c=n(46850),i=n(83077),s=n(67294);t.Z=function(){var e=(0,s.useState)("-"),t=e[0],n=e[1],u=(0,o.Ge)().account,d=(0,c.Z)().stakeV2,f=(0,a.a)(l.$,{variables:{period:"-1",limit:1},pollInterval:1e4}),x=(f.loading,f.error,f.data),p=(0,i.O)().blockNumber;return(0,s.useEffect)((function(){if(u){var e=null===d||void 0===d?void 0:d.ltosIndex;if(e)return n(e)}if(x){var t=(null===x||void 0===x?void 0:x.getDashboardCard[0]).ltosIndex;return n((0,r.Z)(t,7))}}),[x,u,d,p]),{ltosIndex:t}}},45379:function(e,t,n){var r=n(88586),a=n(67294),o=n(5555);t.Z=function(e){var t=(0,a.useState)("-"),n=t[0],l=t[1],c=r.Z.rebase,i=c.epochLength,s=c.beginEpochEnd;return(0,a.useEffect)((function(){setInterval((function(){var t=(0,o.kv)(),n=i-(t-s)%i,r=(0,o.g9)(t-s>0?n:s-t,"HH:mm:ss"),a=r.hours,c=r.mins,u=r.secs,d=1===a.toString().length?"0".concat(r.hours):"".concat(r.hours),f=1===c.toString().length?"0".concat(r.mins):"".concat(r.mins),x=1===u.toString().length?"0".concat(r.secs):"".concat(r.secs);return(0,o.Ze)(),l(e?"".concat(d).concat(e).concat(f).concat(e).concat(x):"".concat(d,".").concat(f,".").concat(x))}),1e3)}),[]),n}},50482:function(e,t,n){n.r(t);var r=n(85893),a=n(45161),o=n(18618),l=n(57747),c=n(93717),i=n(71293),s=n(95787),u=n(37243),d=n(98253);function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],l=!0,c=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);l=!0);}catch(i){c=!0,a=i}finally{try{l||null==n.return||n.return()}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}t.default=function(e){var t=e.title,n=e.content,f=e.symbol,p=e.tooltip,m=e.isWarning,b=(0,a.If)().colorMode,h=x((0,o.a)("(max-width: 1024px)"),1)[0],k=(0,u.Z)().isModalLoading;return(0,r.jsxs)(l.xu,{display:"flex",flexDir:"column",w:h?"155px":"152px",alignItems:"center",mb:"15px",children:[(0,r.jsxs)(c.k,{alignItems:"center",mb:"6px",children:[(0,r.jsx)(i.x,{color:"dark"===b?"gray.100":"gray.1000",h:"17px",fontWeight:600,fontSize:12,textAlign:"center",mr:"6px",children:t}),(0,r.jsx)(s.Z,{label:p})]}),(0,r.jsx)(c.k,{fontWeight:600,justifyContent:"center",h:h?"28px":"25px",children:k?(0,r.jsx)(c.k,{w:"100px",h:"30px",children:(0,r.jsx)(d.default,{})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.x,{color:m?"red.100":"dark"===b?"white.100":"gray.800",fontSize:18,mr:2,children:n||"-"}),(0,r.jsx)(i.x,{color:"dark"===b?"white.200":"gray.800",fontSize:12,lineHeight:"33px",children:f||""})]})})]})}},25004:function(e,t,n){n.r(t),n.d(t,{default:function(){return J}});var r=n(34051),a=n.n(r),o=n(85893),l=n(48940),c=n(45161),i=n(18618),s=n(35541),u=n(19778),d=n(14581),f=n(54346),x=n(93717),p=n(71293),m=n(4480),b=n(54968),h=n(37243),k=n(25675),y=n.n(k),g=n(79822),S=n(79859),v=n(60483),_=n(67294),j=n(26882),w=n(68462),O=n(81271),T=n(79102),Z=n(29619),A=n(28450),L=n(43382),C=n(50482),E=n(60938),I=n(94359),D=n(74506),M=n(60316),N=n(57683),V=n(45379),P=n(36192),z=n(88586);var B=function(){var e=(0,_.useState)(!1),t=e[0],n=e[1],r=(0,_.useState)(!1),a=r[0],o=r[1],l=(0,_.useState)(!0),c=l[0],i=l[1],s=(0,_.useState)(!1),u=s[0],d=s[1],f=(0,Z.Z)().userTOSBalance,x=(0,h.Z)().isModalLoading,p=(0,E.Z)("Stake_screen","stake_modal").inputValue,m=p.stake_modal_balance,b=p.stake_modal_period,k=z.Z.modalMaxWeeks;return(0,_.useEffect)((function(){return x?(n(!1),d(!1)):void 0===m||0===m.length||Number(m)<=0?(d(!0),n(!1)):f&&m?Number(m)>Number(f.replaceAll(",",""))?(d(!1),n(!0)):(d(!1),n(!1)):function(){d(!1),n(!1)}}),[m,f,x]),(0,_.useEffect)((function(){return Number(b)>k||Number(b)<0||0===b.length?o(!0):o(!1)}),[b,k,x]),(0,_.useEffect)((function(){i(t||a||u)}),[t,a,u]),{inputOver:t,inputPeriodOver:a,zeroInputBalance:u,btnDisabled:c}},K=n(27541),W=n(72005),H=n(45093),U=n(34824),F=n(27520);function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function G(e,t,n,r,a,o,l){try{var c=e[o](l),i=c.value}catch(s){return void n(s)}c.done?t(i):Promise.resolve(i).then(r,a)}function $(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function l(e){G(o,r,a,l,c,"next",e)}function c(e){G(o,r,a,l,c,"throw",e)}l(void 0)}))}}function Y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],l=!0,c=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);l=!0);}catch(i){c=!0,a=i}finally{try{l||null==n.return||n.return()}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var J=function(){(0,l.F)();var e=(0,c.If)().colorMode,t=(0,h.Z)(),n=t.selectedModalData,r=t.selectedModal,k=t.closeModal,R=t.isModalLoading,G=t.modalSectionMtValue,J=((0,O.Z)().bondModalData,(0,E.Z)("Stake_screen","stake_modal")),Q=J.inputValue,X=J.setValue,ee=J.setResetValue,te=(0,I.Z)(),ne=te.ltos,re=te.currentBalance,ae=te.newBalance,oe=te.currentTosValue,le=te.newBalanceTosValue,ce=(0,w.Z)(),ie=ce.StakingV2Proxy_CONTRACT,se=ce.TOS_CONTRACT,ue=A.Z.StakingV2Proxy,de=(0,Z.Z)().userTOSBalance,fe=(0,L.Z)(),xe=(fe.stakeList,fe.tosAllowance),pe=(0,_.useState)(!1),me=pe[0],be=pe[1],he=(0,_.useState)(!1),ke=he[0],ye=he[1],ge=(0,_.useState)(!1),Se=ge[0],ve=ge[1],_e=q((0,i.a)("(max-width: 1024px)"),1)[0],je=(0,F.Z)().bp700px,we=(0,D.Z)(Number(Q.stake_modal_balance),Q.stake_modal_period),Oe=we.newEndTime,Te=we.leftDays,Ze=(we.leftWeeks,we.leftHourAndMin),Ae=(0,W.Z)().newBalanceStos,Le=(0,P.Z)().ltosIndex,Ce=(0,V.Z)(":"),Ee=q((0,m.FV)(b.ws),2),Ie=Ee[0],De=Ee[1],Me=q((0,m.FV)(b.lW),2),Ne=Me[0],Ve=Me[1],Pe=(0,N.Z)().setTx,ze=B(),Be=ze.inputOver,Ke=ze.inputPeriodOver,We=ze.btnDisabled,He=ze.zeroInputBalance,Ue=z.Z.errMsg,Fe=z.Z.modalMaxWeeks,Re=(me?("".concat(Q.stake_modal_balance||"-"," TOS"),Ie||"".concat(ne," LTOS"),"".concat(Q.stake_modal_balance," TOS. As LTOS index increases, the number of TOS you can get from unstaking LTOS will also increase."),"".concat(re||"-"," LTOS"),"".concat(oe," TOS. As LTOS index increases, the number of TOS you can get from unstaking LTOS will also increase."),"".concat(ae||"-"," LTOS"),"".concat(le," TOS. As LTOS index increases, the number of TOS you can get from unstaking LTOS will also increase.")):("".concat(Q.stake_modal_balance||"-"," TOS"),Ne||(0,H.Z)(Ae),"".concat((0,H.Z)(Q.stake_modal_balance)," TOS. As LTOS index increases, the number of TOS you can get from unstaking LTOS will also increase."),"".concat(Oe||"-")),(0,_.useCallback)((function(){ee(),be(!1),k()}),[ee,k])),Ge=(0,_.useCallback)($(a().mark((function e(){var t,n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ie){e.next=17;break}if(!me){e.next=9;break}return console.log("---stake()---"),console.log(Q.stake_modal_balance),e.next=6,ie.stake((0,T.Az)(Q.stake_modal_balance));case 6:return t=e.sent,Pe(t),e.abrupt("return",Re());case 9:return n=Q.stake_modal_period+1,console.log("---stakeGetStos()---"),console.log((0,T.Az)(Q.stake_modal_balance),n),e.next=14,ie.stakeGetStos((0,T.Az)(Q.stake_modal_balance),n);case 14:return r=e.sent,Pe(r),e.abrupt("return",Re());case 17:case"end":return e.stop()}}),e)}))),[Q.stake_modal_balance,Q.stake_modal_period,ie,me,Re,Pe]),$e=(0,_.useCallback)($(a().mark((function e(){var t,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!se){e.next=14;break}return ve(!0),e.next=5,se.totalSupply();case 5:return t=e.sent,e.next=8,se.approve(ue,t);case 8:if(n=e.sent,Pe(n),!n){e.next=14;break}return e.next=13,n.wait();case 13:ve(!1);case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),ve(!1);case 19:case"end":return e.stop()}}),e,null,[[0,16]])}))),[se,ue,Pe]);return(0,_.useEffect)((function(){var e;if(xe)return 0===xe?ye(!1):(null===(e=Q.stake_modal_balance)||void 0===e?void 0:e.length)<=0||void 0===Q.stake_modal_balance||xe>=Number(Q.stake_modal_balance)?ye(!0):ye(!1)}),[xe,Q.stake_modal_balance,ke]),(0,_.useEffect)((function(){return"LTOS Staking"===(null===n||void 0===n?void 0:n.stakedType)?be(!0):be(!1)}),[n]),(0,_.useEffect)((function(){de&&X(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Y(e,t,n[t])}))}return e}({},Q,{stake_modal_balance:String(de.replaceAll(",",""))}))}),[de,X,r]),(0,_.useEffect)((function(){Ve(!0)}),[Q,Ve]),(0,_.useEffect)((function(){De(!0)}),[Q.stake_modal_balance,De]),(0,o.jsxs)(s.u_,{isOpen:"stake_stake_modal"===r,isCentered:!0,onClose:Re,children:[(0,o.jsx)(u.Z,{className:"modalOverlayDrawer",bg:"none"}),(0,o.jsx)(d.h,{bg:"light"===e?"white.100":"#121318",minW:je?"350px":"700px",maxW:je?"350px":"700px",mt:G,children:(0,o.jsx)(f.f,{px:0,pt:"30px",children:(0,o.jsxs)(x.k,{w:"100%",flexDir:"column",children:[(0,o.jsxs)(x.k,{flexDir:"column",pos:"relative",children:[(0,o.jsxs)(x.k,{w:"100%",justifyContent:"center",mb:"33px",h:"28px",children:[(0,o.jsx)(p.x,{color:"light"===e?"gray.800":"white.200",fontSize:20,fontWeight:600,children:"Stake"}),(0,o.jsx)(x.k,{pos:"absolute",right:"1.56em",cursor:"pointer",onClick:function(){return Re()},children:(0,o.jsx)(y(),{src:g.default,alt:"CLOSE_ICON"})})]}),(0,o.jsxs)(x.k,{w:"100%",px:je?"20px":"120px",flexDir:"column",mb:"29px",children:[(0,o.jsxs)(x.k,{w:"100%",justifyContent:je?"center":"space-between",mb:je?"15px":"9px",flexDir:je?"column":"row",alignItems:"center",children:[(0,o.jsx)(C.default,{title:"Next Rebase",content:Ce,tooltip:"Time left until LTOS index is increased."}),(0,o.jsx)(C.default,{title:"LTOS Index",content:Le,symbol:"TOS",tooltip:"Number of TOS you get when you unstake 1 LTOS. LTOS index increases every 8 hours."})]}),(0,o.jsx)(x.k,{mb:"9px",w:"100%",children:(0,o.jsx)(j.v,{w:"100%",h:45,placeHolder:"Enter an amount of TOS",pageKey:"Stake_screen",recoilKey:"stake_modal",atomKey:"stake_modal_balance",maxValue:Number(null===de||void 0===de?void 0:de.replaceAll(",","")),isError:He||Be,errorMsg:He?Ue.bondZeroInput:Ue.balanceExceed,rightUnit:"TOS"})}),(0,o.jsxs)(x.k,{fontSize:12,color:"dark"===e?"#8b8b93":"gray.1000",h:"17px",justifyContent:"space-between",mb:je?"22px":"12px",px:"6px",children:[(0,o.jsx)(p.x,{children:"Your Balance"}),(0,o.jsxs)(p.x,{children:[de||"-"," TOS"]})]}),(0,o.jsx)(x.k,{flexDir:"column",children:(0,o.jsxs)(x.k,{flexDir:je?"column":"row",fontSize:12,alignItems:"center",children:[(0,o.jsxs)(x.k,{justifyContent:"space-between",w:je?"100%":"",mb:je?"10px":"",children:[(0,o.jsx)(p.x,{mr:"24px",color:"light"===e?"gray.800":"white.200",children:"Lock-Up Period"}),(0,o.jsxs)(x.k,{alignSelf:"flex-end",children:[(0,o.jsx)(S.Z,{pageKey:"Bond_screen",value:"",valueKey:"Bond_Modal",state:me,setState:be}),(0,o.jsx)(p.x,{ml:"9px",children:"No Lock-Up"})]})]}),(0,o.jsx)(K.Z,{w:je?"310px":"220px",h:"39px",pageKey:"Stake_screen",recoilKey:"stake_modal",atomKey:"stake_modal_period",placeHolder:"1 Weeks",style:{marginLeft:"auto"},isDisabled:me,maxValue:Fe,isError:Ke,errorMsg:Ue.stakePeriodExceed,leftDays:me?void 0:Te,leftTime:me?void 0:Ze,endTime:me||Ke||Be||He?void 0:Oe})]})})]}),(0,o.jsx)(x.k,{px:je?"30px":"43px",mb:"30px",children:(0,o.jsx)(M.default,{pageKey:"Stake_screen",subKey:"stake_modal",periodKey:"stake_modal_period",isSlideDisabled:me,minValue:0})}),(0,o.jsx)(U.default,{fiveDaysLockup:me})]}),(0,o.jsx)(x.k,{justifyContent:"center",mb:"21px",children:ke?(0,o.jsx)(v.Z,{w:_e?310:460,h:42,name:"Stake",onClick:Ge,isDisabled:(me?He||Be:We)||R}):(0,o.jsx)(v.Z,{w:_e?310:460,h:42,name:"Approve",onClick:$e,isDisabled:He||Be||R,isLoading:Se})}),!ke&&(0,o.jsx)(x.k,{fontSize:11,color:"#64646f",textAlign:"center",w:"100%",mb:"24px",children:(0,o.jsx)(p.x,{w:"100%",color:"dark"===e?"gray.200":"gray.700",children:"Please approve your TOS to use this service"})})]})})})]})}}}]);