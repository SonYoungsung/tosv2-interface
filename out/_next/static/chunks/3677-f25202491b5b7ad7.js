"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3677],{13677:function(e,n,t){t.r(n);var r=t(34051),a=t.n(r),o=t(85893),l=t(48940),c=t(45161),s=t(18618),i=t(35541),u=t(19778),f=t(14581),d=t(54346),x=t(93717),p=t(71293),m=t(4480),b=t(54968),h=t(37243),k=t(25675),y=t.n(k),S=t(79822),O=t(60483),w=t(67294),T=t(26882),g=t(68462),j=t(81271),_=t(79102),v=t(29619),C=t(28450),Z=t(43382),A=t(50482),L=t(60938),E=t(94359),D=t(74506),M=t(57683),P=t(45379),V=t(36192),z=t(17767),I=t(88586),N=t(72005),B=t(45093),R=t(34824),W=t(27520);function H(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function F(e,n,t,r,a,o,l){try{var c=e[o](l),s=c.value}catch(i){return void t(i)}c.done?n(s):Promise.resolve(s).then(r,a)}function K(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var o=e.apply(n,t);function l(e){F(o,r,a,l,c,"next",e)}function c(e){F(o,r,a,l,c,"throw",e)}l(void 0)}))}}function U(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function Y(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,o=[],l=!0,c=!1;try{for(t=t.call(e);!(l=(r=t.next()).done)&&(o.push(r.value),!n||o.length!==n);l=!0);}catch(s){c=!0,a=s}finally{try{l||null==t.return||t.return()}finally{if(c)throw a}}return o}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return H(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return H(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.default=function(){(0,l.F)();var e=(0,c.If)().colorMode,n=(0,h.Z)(),t=(n.selectedModalData,n.selectedModal),r=n.closeModal,k=n.isModalLoading,H=n.modalSectionMtValue,F=((0,j.Z)().bondModalData,(0,L.Z)("Stake_screen","stake_modal")),$=F.inputValue,q=F.setValue,G=F.setResetValue,J=(0,E.Z)(),Q=J.ltos,X=J.currentBalance,ee=J.newBalance,ne=J.currentTosValue,te=J.newBalanceTosValue,re=(0,g.Z)(),ae=(re.StakingV2Proxy_CONTRACT,re.TOS_CONTRACT),oe=re.TreasuryProxy_CONTRACT,le=C.Z.StakingV2Proxy,ce=(0,v.Z)().userTOSBalance,se=(0,Z.Z)(),ie=(se.stakeList,se.tosAllowance,(0,w.useState)(!1)),ue=ie[0],fe=ie[1],de=(0,w.useState)(!0),xe=de[0],pe=(de[1],(0,w.useState)(!1)),me=pe[0],be=pe[1],he=Y((0,s.a)("(max-width: 1024px)"),1)[0],ke=(0,W.Z)().bp700px,ye=(0,D.Z)(Number($.stake_modal_balance),$.stake_modal_period),Se=ye.newEndTime,Oe=(ye.leftDays,ye.leftWeeks,ye.leftHourAndMin,(0,N.Z)().newBalanceStos),we=((0,V.Z)().ltosIndex,(0,P.Z)(":"),Y((0,m.FV)(b.ws),2)),Te=we[0],ge=we[1],je=Y((0,m.FV)(b.lW),2),_e=je[0],ve=je[1],Ce=(0,M.Z)().setTx,Ze=(0,z.Z)(),Ae=Ze.inputOver,Le=(Ze.inputPeriodOver,Ze.btnDisabled),Ee=Ze.zeroInputBalance,De=I.Z.errMsg,Me=(I.Z.modalMaxWeeks,ue?("".concat($.stake_modal_balance||"-"," TOS"),Te||"".concat(Q," LTOS"),"".concat($.stake_modal_balance," TOS. As LTOS index increases, the number of TOS you can get from unstaking LTOS will also increase."),"".concat(X||"-"," LTOS"),"".concat(ne," TOS. As LTOS index increases, the number of TOS you can get from unstaking LTOS will also increase."),"".concat(ee||"-"," LTOS"),"".concat(te," TOS. As LTOS index increases, the number of TOS you can get from unstaking LTOS will also increase.")):("".concat($.stake_modal_balance||"-"," TOS"),_e||(0,B.Z)(Oe),"".concat((0,B.Z)($.stake_modal_balance)," TOS. As LTOS index increases, the number of TOS you can get from unstaking LTOS will also increase."),"".concat(Se||"-")),(0,w.useCallback)((function(){G(),fe(!1),r()}),[G,r])),Pe=(0,w.useCallback)(K(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!oe){e.next=8;break}return console.log("---claim()---"),console.log((0,_.Az)($.stake_modal_balance)),e.next=5,oe.claim((0,_.Az)($.stake_modal_balance));case 5:return n=e.sent,Ce(n),e.abrupt("return",Me());case 8:case"end":return e.stop()}}),e)}))),[$.stake_modal_balance,oe,Me,Ce]),Ve=(0,w.useCallback)(K(a().mark((function e(){var n,t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!ae){e.next=14;break}return be(!0),e.next=5,ae.totalSupply();case 5:return n=e.sent,e.next=8,ae.approve(le,n);case 8:if(t=e.sent,Ce(t),!t){e.next=14;break}return e.next=13,t.wait();case 13:be(!1);case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),be(!1);case 19:case"end":return e.stop()}}),e,null,[[0,16]])}))),[ae,le,Ce]);return(0,w.useEffect)((function(){ce&&q(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){U(e,n,t[n])}))}return e}({},$,{stake_modal_balance:String(ce.replaceAll(",",""))}))}),[ce,q,t]),(0,w.useEffect)((function(){ve(!0)}),[$,ve]),(0,w.useEffect)((function(){ge(!0)}),[$.stake_modal_balance,ge]),(0,o.jsxs)(i.u_,{isOpen:"stake_redeem_modal"===t,isCentered:!0,onClose:Me,children:[(0,o.jsx)(u.Z,{className:"modalOverlayDrawer",bg:"none"}),(0,o.jsx)(f.h,{bg:"light"===e?"white.100":"#121318",minW:ke?"350px":"700px",maxW:ke?"350px":"700px",mt:H,children:(0,o.jsx)(d.f,{px:0,pt:"30px",children:(0,o.jsxs)(x.k,{w:"100%",flexDir:"column",children:[(0,o.jsxs)(x.k,{flexDir:"column",pos:"relative",children:[(0,o.jsxs)(x.k,{w:"100%",justifyContent:"center",mb:"33px",h:"28px",children:[(0,o.jsx)(p.x,{color:"light"===e?"gray.800":"white.200",fontSize:20,fontWeight:600,children:"Redeem"}),(0,o.jsx)(x.k,{pos:"absolute",right:"1.56em",cursor:"pointer",onClick:function(){return Me()},children:(0,o.jsx)(y(),{src:S.default,alt:"CLOSE_ICON"})})]}),(0,o.jsxs)(x.k,{w:"100%",px:ke?"20px":"120px",flexDir:"column",mb:"29px",children:[(0,o.jsx)(x.k,{w:"100%",justifyContent:"center",mb:ke?"15px":"9px",flexDir:ke?"column":"row",alignItems:"center",children:(0,o.jsx)(A.default,{title:"Backing Per TOS",content:(0,o.jsx)(x.k,{w:"300px",justifyContent:"center",children:(0,o.jsxs)(p.x,{fontSize:24,children:["1 ",(0,o.jsx)("span",{style:{fontSize:14},children:"TOS"})," = 0.0000731 ",(0,o.jsx)("span",{style:{fontSize:14},children:"ETH"})]})}),tooltip:"Amount of treasury asset backed per 1 TOS in ETH"})}),(0,o.jsx)(x.k,{mb:"9px",w:"100%",children:(0,o.jsx)(T.v,{w:"100%",h:45,placeHolder:"Enter an amount of TOS",pageKey:"Stake_screen",recoilKey:"stake_modal",atomKey:"stake_modal_balance",maxValue:Number(null===ce||void 0===ce?void 0:ce.replaceAll(",","")),isError:Ee||Ae,errorMsg:Ee?De.bondZeroInput:De.balanceExceed,rightUnit:"TOS"})}),(0,o.jsxs)(x.k,{fontSize:12,color:"dark"===e?"#8b8b93":"gray.1000",h:"17px",justifyContent:"space-between",mb:ke?"22px":"12px",px:"6px",children:[(0,o.jsx)(p.x,{children:"Your Balance"}),(0,o.jsxs)(p.x,{children:[ce||"-"," TOS"]})]})]}),(0,o.jsx)(R.default,{fiveDaysLockup:!1,isRedeem:!0})]}),(0,o.jsx)(x.k,{justifyContent:"center",mb:"21px",children:xe?(0,o.jsx)(O.Z,{w:he?310:460,h:42,name:"Redeem",onClick:Pe,isDisabled:(ue?Ee||Ae:Le)||k}):(0,o.jsx)(O.Z,{w:he?310:460,h:42,name:"Approve",onClick:Ve,isDisabled:Ee||Ae||k,isLoading:me})}),!xe&&(0,o.jsx)(x.k,{fontSize:11,color:"#64646f",textAlign:"center",w:"100%",mb:"24px",children:(0,o.jsx)(p.x,{w:"100%",color:"dark"===e?"gray.200":"gray.700",children:"Please approve your TOS to use this service"})})]})})})]})}}}]);