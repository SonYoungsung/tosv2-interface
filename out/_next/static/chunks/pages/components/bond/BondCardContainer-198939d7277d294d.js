(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3575],{9343:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/components/bond/BondCardContainer",function(){return n(35865)}])},29365:function(t,e,n){"use strict";n.d(e,{x:function(){return o}});var r=n(4480),o=(0,r.cn)({key:"bond_filter_sort",default:"Earliest"});(0,r.nZ)({key:"bond_filter_sort_state",get:function(t){return(0,t.get)(o)}})},95787:function(t,e,n){"use strict";var r=n(85893),o=n(45161),i=n(38658),c=n(21371);e.Z=function(t){var e=(0,o.If)().colorMode,n=t.label;return(0,r.jsx)(i.u,{display:0===(null===n||void 0===n?void 0:n.length)?"none":"flex",placement:"top",label:n,bg:"dark"===e?"#1f2128":"#fff",borderRadius:"3px",color:"light"===e?"#07070c":"#8b8b93",fontSize:"12px",border:"light"===e?"solid 1px #e8edf2":"solid 1px #313442",children:(0,r.jsx)(c.w,{display:0===(null===n||void 0===n?void 0:n.length)?"none":"",h:"16px",minW:"16px"})})}},88586:function(t,e){"use strict";e.Z={rebase:{epochLength:28800,beginEpochEnd:1668682800},LOCKTOS_maxWeeks:156,LOCKTOS_epochUnit:604800,modalMaxWeeks:155,rebasePerEpoch:8704505e-11,rebasePeriod:28800,mainnetGasPrice:"6849315",minBondGasPrice:"279458",errMsg:{balanceExceed:"Input has exceeded your balance",bondZeroInput:"Input has to be greater than 0",periodExceed:"Must be between 1 and 155",stakePeriodExceed:"Must be between 0 and 155",managePeriodExceed:"New lock-up period must be equal or greater than the existing lock-up period",zeroInput:"Input has to be equal to or greater than 0",periodExceedThanMaximum:"Must be less than 156 weeks"}}},32082:function(t,e,n){"use strict";var r=n(34051),o=n.n(r),i=n(68462),c=n(67294);function a(t,e,n,r,o,i,c){try{var a=t[i](c),u=a.value}catch(s){return void n(s)}a.done?e(u):Promise.resolve(u).then(r,o)}function u(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function c(t){a(i,r,o,c,u,"next",t)}function u(t){a(i,r,o,c,u,"throw",t)}c(void 0)}))}}e.Z=function(){var t=(0,c.useState)(604800),e=t[0],n=t[1],r=(0,i.Z)().LockTOS_CONTRACT;return(0,c.useEffect)((function(){function t(){return(t=u(o().mark((function t(){var e;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r){t.next=7;break}return t.t0=parseInt,t.next=4,r.epochUnit();case 4:t.t1=t.sent,e=(0,t.t0)(t.t1),n(e);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}(function(){return t.apply(this,arguments)})().catch((function(t){console.log("**useLockTOS err**"),console.log(t)}))}),[r]),{epochUnit:e}}},35865:function(t,e,n){"use strict";n.r(e);var r=n(85893),o=n(45161),i=n(93717),c=n(71293),a=n(67294),u=n(32157),s=n(77669);e.default=function(){var t=(0,a.useState)(0),e=t[0],n=(t[1],(0,o.If)().colorMode);return(0,r.jsxs)(i.k,{mt:"55px",w:"100%",justifyContent:"center",flexDir:"column",children:[(0,r.jsx)(c.x,{fontSize:22,fontWeight:"bold",color:"dark"===n?"white.200":"gray.800",mb:"34px",children:"Bond List"}),0===e?(0,r.jsx)(u.default,{}):(0,r.jsx)(s.default,{})]})}},27353:function(t,e,n){"use strict";n.r(e);var r=n(85893),o=n(45161),i=n(93717),c=n(71293),a=n(50830);function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t){var e=t.title,n=t.content,a=t.style,s=(0,o.If)().colorMode;return(0,r.jsxs)(i.k,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){u(t,e,n[e])}))}return t}({justifyContent:"space-between",fontSize:14,h:"20px"},a,{children:[(0,r.jsx)(c.x,{color:"dark"===s?"gray.100":"gray.1000",children:e}),(0,r.jsx)(c.x,{color:"dark"===s?"white.200":"gray.800",children:n})]}))}e.default=function(t){var e=t.info,n=t.tokenType,u=t.isOver,l=t.lockUpDate,f=(0,o.If)().colorMode;return(0,r.jsxs)(i.k,{flexDir:"column",w:"362px",h:"200px",borderWidth:1,borderColor:"dark"===f?"gray3600":"gray.900",borderRadius:10,bg:"dark"===f?"gray.600":"white.100",pt:"18px",px:"20px",pb:"21px",children:[(0,r.jsxs)(i.k,{mb:"18px",justifyContent:"space-between",children:[(0,r.jsxs)(i.k,{children:[(0,r.jsx)(a.Z,{tokenType:n}),(0,r.jsx)(c.x,{fontSize:20,fontWeight:600,textAlign:"center",lineHeight:"46px",color:"light"===f?"gray.800":"white.200",ml:"12px",children:n})]}),(0,r.jsx)(i.k,{fontSize:12,color:u?"blue.200":"red.100",textAlign:"center",alignItems:"center",justifyContent:"center",children:(0,r.jsx)(c.x,{children:u?"Unlocked":"Locked"})})]}),null===e||void 0===e?void 0:e.map((function(t,n){return(0,r.jsx)(s,{title:t.title,content:t.content,style:{marginBottom:n!==e.length-1?"9px":"3px"}},t.title+n)})),(0,r.jsx)(i.k,{justifyContent:"flex-end",fontSize:9,mb:"21px",color:"#eaeaf4",children:(0,r.jsx)(c.x,{color:"dark"===f?"#eaeaf4":"#16161e",children:l})})]})}},1259:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return T}});var r=n(85893),o=n(5674),i=n(34051),c=n.n(i),a=n(79102),u=n(5555),s=n(76312),l=n(77044),f=n(29365),d=n(68806);function p(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function h(){var t=p(["\n  query GetBondList($period: String, $limit: Int) {\n    getBondList(period: $period, limit: $limit) {\n      index\n      capacity\n      quoteToken\n      totalSold\n      tokenLogo\n      bondPrice\n      endTime\n      createdAt\n    }\n  }\n"]);return h=function(){return t},t}function x(){var t=p(["\n  query GetBondHistory($period: String, $limit: Int, $account: String) {\n    getMyHistory(period: $period, limit: $limit, account: $account) {\n      contract\n      contractName\n      eventName\n      from\n      data\n      chainId\n      blockNumber\n      transactionHash\n      blockTimestamp\n      createdTime\n      updated\n    }\n  }\n"]);return x=function(){return t},t}(0,d.Ps)(h());var m=(0,d.Ps)(x()),v=n(66028),g=n(32082),b=n(68462),k=n(67294),y=n(4480);function j(t,e,n,r,o,i,c){try{var a=t[i](c),u=a.value}catch(s){return void n(s)}a.done?e(u):Promise.resolve(u).then(r,o)}function S(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function c(t){j(i,r,o,c,a,"next",t)}function a(t){j(i,r,o,c,a,"throw",t)}c(void 0)}))}}var M=function(){var t=(0,k.useState)(void 0),e=t[0],n=t[1],r=(0,l.Ge)().account,o=(0,b.Z)(),i=o.StakingV2Proxy_CONTRACT,d=o.LockTOS_CONTRACT,p=(0,g.Z)().epochUnit,h=(0,s.aM)(m,{variables:{account:r,period:"-1"},pollInterval:1e4}),x=h.data,j=(h.loading,h.error,(0,s.aM)(v.N,{variables:{tokenId:"ethereum"}}).data),M=(0,y.sJ)(f.x);return(0,k.useEffect)((function(){var t=function(){var t=S(c().mark((function t(){var e,o,s,l,f;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(x&&r&&j)){t.next=8;break}return e=j.getTokenPrice,o=e.price,s=x.getMyHistory,l=s.map(function(){var t=S(c().mark((function t(e){var n,r,s,l,f,h,x,m,v,g,b,k,y,j,S,M,w,T;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.data&&e.blockTimestamp&&e.eventName&&i&&d)){t.next=19;break}return n=e.data,r=e.blockTimestamp,s=e.eventName,l=n.ltos,n.marketId,f=n.tosPrice,h=(0,a.WN)({amount:l.toString()}),x=null===n||void 0===n?void 0:n.stakeId,m=1/f*1e18*o,t.next=8,i.connectId(x);case 8:return v=t.sent,t.next=11,d.balanceOfLockAt(v,r);case 11:return g=t.sent,b="-",k=!1,y="5 Days",(j="StakedGetStosByBond"===s)?(S=(0,u.kv)(),M=S+(null===n||void 0===n?void 0:n.periodWeeks)*Number(p),b="".concat((0,u.df)(r,"YYYY. MM.DD. HH:mm"),"  ~ ").concat((0,u.df)(M,"MM.DD. HH:mm")),w=M-r,y="".concat(Math.floor(w/86400)," Days"),k=(0,u.vI)(Number(M))):(b="".concat((0,u.df)(r,"YYYY. MM.DD. HH:mm")," ~ ").concat((0,u.ab)(r,5,"MM.DD HH:mm")),k=(0,u.vI)(Number(r)+432e3)),T={info:[{title:"Staked",content:j?"".concat(h," LTOS / ").concat((0,a.WN)({amount:g.toString()}),"sTOS"):"".concat(h," LTOS")},{title:"Bond Price",content:"$ ".concat(m.toLocaleString(void 0,{maximumFractionDigits:2}))},{title:"Lock-Up Period",content:y}],tokenType:"ETH",lockUpDate:b,isOver:k},t.abrupt("return",T);case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.next=6,Promise.all(l);case 6:f=t.sent,n(f);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t().catch((function(t){console.log("**fetchListdata err**"),console.log(t)}))}),[r,x,j,p,i,d,M]),{cardList:e}},w=n(27353);var T=function(){var t=M().cardList;return console.log(t),(0,r.jsx)(o.M,{columns:3,gridRowGap:"24px",columnGap:"25px",children:null===t||void 0===t?void 0:t.map((function(t,e){return(0,r.jsx)(w.default,{info:t.info,tokenType:t.tokenType,isOver:t.isOver,lockUpDate:t.lockUpDate},t.tokenType+e)}))})}},77669:function(t,e,n){"use strict";n.r(e);var r=n(85893),o=n(93717),i=n(1259),c=n(77044),a=n(60483),u=n(56621);e.default=function(){var t=(0,c.Ge)(),e=t.account,n=(t.activate,(0,u.Z)().tryActivation);return e?(0,r.jsx)(o.k,{children:(0,r.jsx)(i.default,{})}):(0,r.jsx)(o.k,{flexDir:"column",alignItems:"center",children:(0,r.jsx)(a.Z,{name:"Connect Wallet",w:"240px",h:"42px",style:{fontSize:16},onClick:n})})}},45093:function(t,e){"use strict";e.Z=function(t,e){if(void 0===t||null===t)return"-";if(isNaN(t))return"-";if(0===t||"0"===t)return e?"0.".concat("0".repeat(e)):"0.00";var n=t.toString().split(".");return n[0].length>=4&&(n[0]=n[0].replace(/(\d)(?=(\d{3})+$)/g,"$1,")),n[1]&&n[1].length>=2&&(n[1]=n[1].slice(0,e||2)),void 0===n[1]&&(n[1]="".concat("0".repeat(null!==e&&void 0!==e?e:2))),n.join(".").replaceAll(" ","")}},5555:function(t,e,n){"use strict";n.d(e,{V4:function(){return h},Ze:function(){return p},ab:function(){return f},df:function(){return u},g9:function(){return d},kv:function(){return s},vI:function(){return l}});var r=n(88586),o=n(30381),i=n.n(o),c=n(80008),a=n.n(c);function u(t,e){return i().unix(t).format(e||"YYYY.MM.D")}function s(){return i()().unix()}function l(t){return t-s()<0}function f(t,e,n,r){return i().unix(t).add(e,"d").format(n||"MM.DD HH:mm:ss")}function d(t,e){var n=3600,r=86400,o=Math.floor(t/r),i=Math.floor((t-r*o)/n),c=Math.floor((t-r*o-n*i)/60);return{days:o,hours:i,mins:c,secs:t-r*o-n*i-60*c}}function p(){var t=a().tz(a().tz.guess()).format("Z").toString().split(":")[0].replaceAll("0","");return"UTC".concat(t)}function h(t){var e=t.currentEndTimeStamp,n=r.Z.LOCKTOS_epochUnit,o=e-s(),i=o/n,c=(o-604800*Math.floor(i))/86400,a=o-604800*Math.floor(i)-86400*Math.floor(c),u=d(a).hours,l=d(a).mins,f=1===u.toString().length?"0".concat(u):"".concat(u),p=1===l.toString().length?"0".concat(l):"".concat(l);return{leftWeeks:Math.floor(i).toString(),leftDays:String(Math.floor(c)),leftHourAndMin:"".concat(f,":").concat(p)}}}},function(t){t.O(0,[4885,2678,8658,8555,4851,2157,9774,2888,179],(function(){return e=9343,t(t.s=e);var e}));var e=t.O();_N_E=e}]);