(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[182],{7751:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/components/stake/UnstakeModal",function(){return n(52498)}])},95787:function(e,t,n){"use strict";var r=n(85893),o=n(45161),a=n(38658),u=n(21371);t.Z=function(e){var t=(0,o.If)().colorMode,n=e.label;return(0,r.jsx)(a.u,{display:0===(null===n||void 0===n?void 0:n.length)?"none":"flex",placement:"top",label:n,bg:"dark"===t?"#1f2128":"#fff",borderRadius:"3px",color:"light"===t?"#07070c":"#8b8b93",fontSize:"12px",border:"light"===t?"solid 1px #e8edf2":"solid 1px #313442",children:(0,r.jsx)(u.w,{display:0===(null===n||void 0===n?void 0:n.length)?"none":"",h:"16px",minW:"16px"})})}},88586:function(e,t){"use strict";t.Z={rebase:{epochLength:28800,beginEpochEnd:1668682800},LOCKTOS_maxWeeks:156,LOCKTOS_epochUnit:604800,modalMaxWeeks:155,rebasePerEpoch:8704505e-11,rebasePeriod:28800,mainnetGasPrice:"6849315",minBondGasPrice:"279458",errMsg:{balanceExceed:"Input has exceeded your balance",bondZeroInput:"Input has to be greater than 0",periodExceed:"Must be between 1 and 155",stakePeriodExceed:"Must be between 0 and 155",managePeriodExceed:"New lock-up period must be equal or greater than the existing lock-up period",zeroInput:"Input has to be equal to or greater than 0",periodExceedThanMaximum:"Must be less than 156 weeks"}}},35418:function(e,t,n){"use strict";n.d(t,{$:function(){return l},K:function(){return i}});var r=n(68806);function o(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function a(){var e=o(["\n  query GetDashboard($period: String!, $limit: Int!) {\n    getDashboard(period: $period, limit: $limit) {\n      _id\n      chainId\n      createdAt\n      marketCap\n      runway\n      tosPrice\n      tosSupply\n      sTosSupply\n      lTosSupply\n      totalValueStaked\n      treasuryBalance\n      updatedAt\n    }\n  }\n"]);return a=function(){return e},e}function u(){var e=o(["\n  query GetDashboardCard($period: String!, $limit: Int!) {\n    getDashboardCard(period: $period, limit: $limit) {\n      tosPrice\n      backingPerTos\n      ltosPrice\n      mintingRate\n      ltosIndex\n      chainId\n    }\n  }\n"]);return u=function(){return e},e}var i=(0,r.Ps)(a()),l=(0,r.Ps)(u())},46850:function(e,t,n){"use strict";var r=n(34051),o=n.n(r),a=n(5555),u=n(35553),i=n(83077),l=n(68462),c=n(67294);function s(e,t,n,r,o,a,u){try{var i=e[a](u),l=i.value}catch(c){return void n(c)}i.done?t(l):Promise.resolve(l).then(r,o)}function d(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function u(e){s(a,r,o,u,i,"next",e)}function i(e){s(a,r,o,u,i,"throw",e)}u(void 0)}))}}t.Z=function(){var e=(0,c.useState)(void 0),t=e[0],n=e[1],r=(0,c.useState)(void 0),s=r[0],f=r[1],p=(0,l.Z)().StakingV2Proxy_CONTRACT,v=(0,i.O)().blockNumber;return(0,c.useEffect)((function(){function e(){return(e=d(o().mark((function e(){var t,r,i,l,c,s,d,v,h;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!p){e.next=18;break}return e.next=3,p.possibleIndex();case 3:return t=e.sent,e.next=6,p.rebasePerEpoch();case 6:return r=e.sent,i=u.formatEther(r),l=u.formatUnits(t.toString(),18),c=l.split("."),s=c[0]+"."+c[1].slice(0,7),e.next=13,p.epoch();case 13:d=e.sent,v=d.end,h=(0,a.df)(v.toString(),"HH:mm:ss"),n({ltosIndex:s,ltosIndexBN:t,nextRebase:h}),f(Number(i));case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(function(){return e.apply(this,arguments)})().catch((function(e){console.log("**useStakeV2 err**"),console.log(e)}))}),[p,v]),{stakeV2:t,rebasePerEpoch:s}}},36192:function(e,t,n){"use strict";var r=n(45093),o=n(76312),a=n(77044),u=n(35418),i=n(46850),l=n(83077),c=n(67294);t.Z=function(){var e=(0,c.useState)("-"),t=e[0],n=e[1],s=(0,a.Ge)().account,d=(0,i.Z)().stakeV2,f=(0,o.aM)(u.$,{variables:{period:"-1",limit:1},pollInterval:1e4}),p=(f.loading,f.error,f.data),v=(0,l.O)().blockNumber;return(0,c.useEffect)((function(){if(s){var e=null===d||void 0===d?void 0:d.ltosIndex;if(e)return n(e)}if(p){var t=(null===p||void 0===p?void 0:p.getDashboardCard[0]).ltosIndex;return n((0,r.Z)(t,7))}}),[p,s,d,v]),{ltosIndex:t}}},60938:function(e,t,n){"use strict";n.d(t,{Z:function(){return w}});var r=n(4480),o={bond_modal_period:155,bond_modal_balance:void 0},a=(0,r.cn)({key:"bond_bondModal_input",default:o}),u=(0,r.nZ)({key:"bond_bondModal_input_state",get:function(e){return(0,e.get)(a)}});function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],u=!0,i=!1;try{for(n=n.call(e);!(u=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);u=!0);}catch(l){i=!0,o=l}finally{try{u||null==n.return||n.return()}finally{if(i)throw o}}return a}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var c=function(e){var t=(0,r.sJ)(u),n=l((0,r.FV)(a),2),o=n[0],i=n[1],c=(0,r.rb)(a);return"bond_modal"===e?{inputValue:t,value:o,setValue:i,resetValue:c}:{inputValue:void 0,value:void 0,setValue:void 0,resetValue:void 0}},s=n(88586).Z.modalMaxWeeks,d={stake_modal_period:s,stake_modal_balance:void 0},f=(0,r.cn)({key:"stake_stakeModal_input",default:d}),p=(0,r.nZ)({key:"stake_stakeModal_input_state",get:function(e){return(0,e.get)(f)}}),v={stake_unstakeModal_balance:void 0},h=(0,r.cn)({key:"stake_unstakeModal_input",default:v}),m=(0,r.nZ)({key:"stake_unstakeModal_input_state",get:function(e){return(0,e.get)(h)}}),b={stake_updateModal_period:s,stake_updateModal_ltos_balance:void 0,stake_updateModal_tos_balance:void 0},g=(0,r.cn)({key:"stake_updateModal_input",default:b}),y=(0,r.nZ)({key:"stake_updateModal_input_state",get:function(e){return(0,e.get)(g)}}),k={stake_relockModal_period:s,stake_relockModal_ltos_balance:void 0,stake_relockModal_tos_balance:void 0},x=(0,r.cn)({key:"stake_relockModal_input",default:k}),_=(0,r.nZ)({key:"stake_relockModal_input_state",get:function(e){return(0,e.get)(x)}});function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],u=!0,i=!1;try{for(n=n.call(e);!(u=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);u=!0);}catch(l){i=!0,o=l}finally{try{u||null==n.return||n.return()}finally{if(i)throw o}}return a}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var M=function(e){var t=(0,r.sJ)(p),n=V((0,r.FV)(f),2),o=n[0],a=n[1],u=(0,r.rb)(f),i=(0,r.sJ)(y),l=V((0,r.FV)(g),2),c=l[0],s=l[1],d=(0,r.rb)(g),v=(0,r.sJ)(m),b=V((0,r.FV)(h),2),k=b[0],S=b[1],M=(0,r.rb)(h),w=(0,r.sJ)(_),I=V((0,r.FV)(x),2),A=I[0],Z=I[1],j=(0,r.rb)(x);switch(e){case"stake_modal":return{inputValue:t,value:o,setValue:a,resetValue:u};case"update_modal":return{inputValue:i,value:c,setValue:s,resetValue:d};case"unstake_modal":return{inputValue:v,value:k,setValue:S,resetValue:M};case"relock_modal":return{inputValue:w,value:A,setValue:Z,resetValue:j};default:return{inputValue:void 0,value:void 0,setValue:void 0,resetValue:void 0}}};var w=function(e,t){var n=M(t),r=n.inputValue,o=n.value,a=n.setValue,u=n.resetValue,i=c(t),l=i.inputValue,s=i.value,d=i.setValue,f=i.resetValue;switch(e){case"Stake_screen":return{inputValue:r,value:o,setValue:a,setResetValue:u};case"Bond_screen":return{inputValue:l,value:s,setValue:d,setResetValue:f};default:return{inputValue:void 0,value:void 0,setValue:void 0}}}},45379:function(e,t,n){"use strict";var r=n(88586),o=n(67294),a=n(5555);t.Z=function(e){var t=(0,o.useState)("-"),n=t[0],u=t[1],i=r.Z.rebase,l=i.epochLength,c=i.beginEpochEnd;return(0,o.useEffect)((function(){setInterval((function(){var t=(0,a.kv)(),n=l-(t-c)%l,r=(0,a.g9)(t-c>0?n:c-t,"HH:mm:ss"),o=r.hours,i=r.mins,s=r.secs,d=1===o.toString().length?"0".concat(r.hours):"".concat(r.hours),f=1===i.toString().length?"0".concat(r.mins):"".concat(r.mins),p=1===s.toString().length?"0".concat(r.secs):"".concat(r.secs);return(0,a.Ze)(),u(e?"".concat(d).concat(e).concat(f).concat(e).concat(p):"".concat(d,".").concat(f,".").concat(p))}),1e3)}),[]),n}},43382:function(e,t,n){"use strict";var r=n(34051),o=n.n(r),a=n(79042),u=n(77044),i=n(67294),l=n(28450),c=n(83077),s=n(68462);function d(e,t,n,r,o,a,u){try{var i=e[a](u),l=i.value}catch(c){return void n(c)}i.done?t(l):Promise.resolve(l).then(r,o)}function f(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function u(e){d(a,r,o,u,i,"next",e)}function i(e){d(a,r,o,u,i,"throw",e)}u(void 0)}))}}t.Z=function(){var e=(0,i.useState)({tosAllowance:void 0,stakeList:void 0,simpleStakingId:void 0}),t=e[0],n=e[1],r=(0,s.Z)().TOS_CONTRACT,d=(0,u.Ge)().account,p=l.Z.StakingV2Proxy,v=(0,c.O)().blockNumber,h=(0,s.Z)().StakingV2Proxy_CONTRACT;return(0,i.useEffect)((function(){function e(){return(e=f(o().mark((function e(){var t,u,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r&&d&&h)){e.next=9;break}return e.next=4,r.allowance(d,p);case 4:return u=e.sent,e.next=7,h.stakingOf(d);case 7:return i=e.sent,e.abrupt("return",n({tosAllowance:Number((0,a.WN)({amount:u.toString()})),stakeList:i,simpleStakingId:null===(t=i[1])||void 0===t?void 0:t.toString()}));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(function(){return e.apply(this,arguments)})().then((function(e){void 0!==e&&(console.log("**fetchUseUser err**"),console.log(e))}))}),[r,d,p,v,h]),t}},98253:function(e,t,n){"use strict";n.r(t);var r=n(85893),o=n(93717);t.default=function(){return(0,r.jsx)(o.k,{w:"100%",h:"100%",className:"gradient"})}},50482:function(e,t,n){"use strict";n.r(t);var r=n(85893),o=n(45161),a=n(18618),u=n(57747),i=n(93717),l=n(71293),c=n(95787),s=n(37243),d=n(98253);function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],u=!0,i=!1;try{for(n=n.call(e);!(u=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);u=!0);}catch(l){i=!0,o=l}finally{try{u||null==n.return||n.return()}finally{if(i)throw o}}return a}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}t.default=function(e){var t=e.title,n=e.content,f=e.symbol,v=e.tooltip,h=e.isWarning,m=(0,o.If)().colorMode,b=p((0,a.a)("(max-width: 1024px)"),1)[0],g=(0,s.Z)().isModalLoading;return(0,r.jsxs)(u.xu,{display:"flex",flexDir:"column",w:b?"155px":"152px",alignItems:"center",mb:"15px",children:[(0,r.jsxs)(i.k,{alignItems:"center",mb:"6px",children:[(0,r.jsx)(l.x,{color:"dark"===m?"gray.100":"gray.1000",h:"17px",fontWeight:600,fontSize:12,textAlign:"center",mr:"6px",children:t}),(0,r.jsx)(c.Z,{label:v})]}),(0,r.jsx)(i.k,{fontWeight:600,justifyContent:"center",h:b?"28px":"25px",children:g?(0,r.jsx)(i.k,{w:"100px",h:"30px",children:(0,r.jsx)(d.default,{})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.x,{color:h?"red.100":"dark"===m?"white.100":"gray.800",fontSize:18,mr:2,children:n||"-"}),(0,r.jsx)(l.x,{color:"dark"===m?"white.200":"gray.800",fontSize:12,lineHeight:"33px",children:f||""})]})})]})}},45093:function(e,t){"use strict";t.Z=function(e,t){if(void 0===e||null===e)return"-";if(isNaN(e))return"-";if(0===e||"0"===e)return t?"0.".concat("0".repeat(t)):"0.00";var n=e.toString().split(".");return n[0].length>=4&&(n[0]=n[0].replace(/(\d)(?=(\d{3})+$)/g,"$1,")),n[1]&&n[1].length>=2&&(n[1]=n[1].slice(0,t||2)),void 0===n[1]&&(n[1]="".concat("0".repeat(null!==t&&void 0!==t?t:2))),n.join(".").replaceAll(" ","")}},5555:function(e,t,n){"use strict";n.d(t,{V4:function(){return v},Ze:function(){return p},ab:function(){return d},df:function(){return l},g9:function(){return f},kv:function(){return c},vI:function(){return s}});var r=n(88586),o=n(30381),a=n.n(o),u=n(80008),i=n.n(u);function l(e,t){return a().unix(e).format(t||"YYYY.MM.D")}function c(){return a()().unix()}function s(e){return e-c()<0}function d(e,t,n,r){return a().unix(e).add(t,"d").format(n||"MM.DD HH:mm:ss")}function f(e,t){var n=3600,r=86400,o=Math.floor(e/r),a=Math.floor((e-r*o)/n),u=Math.floor((e-r*o-n*a)/60);return{days:o,hours:a,mins:u,secs:e-r*o-n*a-60*u}}function p(){var e=i().tz(i().tz.guess()).format("Z").toString().split(":")[0].replaceAll("0","");return"UTC".concat(e)}function v(e){var t=e.currentEndTimeStamp,n=r.Z.LOCKTOS_epochUnit,o=t-c(),a=o/n,u=(o-604800*Math.floor(a))/86400,i=o-604800*Math.floor(a)-86400*Math.floor(u),l=f(i).hours,s=f(i).mins,d=1===l.toString().length?"0".concat(l):"".concat(l),p=1===s.toString().length?"0".concat(s):"".concat(s);return{leftWeeks:Math.floor(a).toString(),leftDays:String(Math.floor(u)),leftHourAndMin:"".concat(d,":").concat(p)}}}},function(e){e.O(0,[4885,2678,8658,8555,246,9002,2498,9774,2888,179],(function(){return t=7751,e(e.s=t);var t}));var t=e.O();_N_E=t}]);