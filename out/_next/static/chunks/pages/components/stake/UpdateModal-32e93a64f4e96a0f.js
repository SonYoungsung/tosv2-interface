(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9393],{76491:function(t,n,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/components/stake/UpdateModal",function(){return e(96100)}])},5371:function(t,n,e){"use strict";var o=e(34051),r=e.n(o),a=e(45093),c=e(79102),u=e(5555),i=e(32082),s=e(5835),l=e(89406),f=e(68462),d=e(60938),p=e(37243),v=e(67294),m=e(74506);function h(t,n,e,o,r,a,c){try{var u=t[a](c),i=u.value}catch(s){return void e(s)}u.done?n(i):Promise.resolve(i).then(o,r)}function _(t){return function(){var n=this,e=arguments;return new Promise((function(o,r){var a=t.apply(n,e);function c(t){h(a,o,r,c,u,"next",t)}function u(t){h(a,o,r,c,u,"throw",t)}c(void 0)}))}}n.Z=function(){var t,n=(0,v.useState)("-"),e=n[0],o=n[1],h=(0,v.useState)("-"),k=h[0],w=h[1],S=(0,v.useState)(1),T=S[0],N=S[1],g=(0,v.useState)("-"),b=g[0],x=g[1],y=(0,v.useState)("-"),Z=y[0],A=y[1],E=(0,f.Z)(),M=E.StakingV2Proxy_CONTRACT,C=(E.LockTOS_CONTRACT,(0,l.Z)()),O=C.stakeId,P=(C.connectId,(0,s.Z)()),I=((0,p.Z)().selectedModalData,(0,d.Z)("Stake_screen","update_modal").inputValue),L=Number(null===P||void 0===P||null===(t=P.currentTosAmount)||void 0===t?void 0:t.replaceAll(",",""))+Number(I.stake_updateModal_tos_balance),R=(0,m.Z)(L,Number(I.stake_updateModal_period)),U=R.stosReward,B=R.newEndTime,H=(0,i.Z)().epochUnit;return(0,v.useEffect)((function(){function t(){return(t=_(r().mark((function t(){var n,e,o,a,c,i,s,l,f,d,p;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:M&&O&&P&&(n=P.currentEndTime,e=P.currentEndTimeStamp,w("".concat(n," (").concat((0,u.Ze)(),")")),o=(0,u.kv)(),c=(a=e-o)/H,i=(a-604800*Math.floor(c))/86400,s=a-604800*Math.floor(c)-86400*Math.floor(i),l=(0,u.g9)(s,"HH:mm").hours,f=(0,u.g9)(s,"HH:mm").mins,d=1===l.toString().length?"0".concat(l):"".concat(l),p=1===f.toString().length?"0".concat(f):"".concat(f),N(Math.floor(c)),x(String(Math.floor(i))),A("".concat(d,":").concat(p)));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}(function(){return t.apply(this,arguments)})().catch((function(t){}))}),[O,M,P,H]),(0,v.useEffect)((function(){function t(){return(t=_(r().mark((function t(){var n,e,u,i;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!M||!(null===P||void 0===P?void 0:P.ltosBalance)||void 0===I.stake_updateModal_tos_balance){t.next=8;break}return n=(0,c.Az)(I.stake_updateModal_tos_balance.replaceAll(",","")),t.next=4,M.getTosToLtosPossibleIndex(n);case 4:e=t.sent,u=(0,c.WN)({amount:e}),i=Number(null===P||void 0===P?void 0:P.ltosBalance.replaceAll(",",""))+Number(null===u||void 0===u?void 0:u.replaceAll(",","")),o((0,a.Z)(i));case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}(function(){return t.apply(this,arguments)})().catch((function(t){console.log("**useUpdateModalData2 err**"),console.log(t)}))}),[M,I,P]),{currentEndTime:k,newEndTime:B,leftWeeks:T,leftDays:b,leftTime:Z,newStosBalance:U,newLtosBalance:e,totalTosAmount:L}}},43382:function(t,n,e){"use strict";var o=e(34051),r=e.n(o),a=e(79102),c=e(77044),u=e(67294),i=e(28450),s=e(83077),l=e(68462);function f(t,n,e,o,r,a,c){try{var u=t[a](c),i=u.value}catch(s){return void e(s)}u.done?n(i):Promise.resolve(i).then(o,r)}function d(t){return function(){var n=this,e=arguments;return new Promise((function(o,r){var a=t.apply(n,e);function c(t){f(a,o,r,c,u,"next",t)}function u(t){f(a,o,r,c,u,"throw",t)}c(void 0)}))}}n.Z=function(){var t=(0,u.useState)({tosAllowance:void 0,stakeList:void 0,simpleStakingId:void 0}),n=t[0],e=t[1],o=(0,l.Z)().TOS_CONTRACT,f=(0,c.Ge)().account,p=i.Z.StakingV2Proxy,v=(0,s.O)().blockNumber,m=(0,l.Z)().StakingV2Proxy_CONTRACT;return(0,u.useEffect)((function(){function t(){return(t=d(r().mark((function t(){var n,c,u;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(o&&f&&m)){t.next=9;break}return t.next=4,o.allowance(f,p);case 4:return c=t.sent,t.next=7,m.stakingOf(f);case 7:return u=t.sent,t.abrupt("return",e({tosAllowance:Number((0,a.WN)({amount:c.toString()})),stakeList:u,simpleStakingId:null===(n=u[1])||void 0===n?void 0:n.toString()}));case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}(function(){return t.apply(this,arguments)})().then((function(t){void 0!==t&&(console.log("**fetchUseUser err**"),console.log(t))}))}),[o,f,p,v,m]),n}},33090:function(t,n,e){"use strict";e.d(n,{I:function(){return l}});var o=e(28912),r=e(16554),a=e(77030),c=e(33179),u=e(22548),i=e(25432),s=e(85893),l=(0,r.G)((function(t,n){const{htmlSize:e,...r}=t,l=(0,a.jC)("Input",r),f=(0,c.Lr)(r),d=(0,o.Y)(f),p=(0,i.cx)("chakra-input",t.className);return(0,s.jsx)(u.m.input,{size:e,...d,__css:l.field,ref:n,className:p})}));l.displayName="Input",l.id="Input"}},function(t){t.O(0,[4885,2678,8658,8555,246,7277,3942,7756,1481,6100,9774,2888,179],(function(){return n=76491,t(t.s=n);var n}));var n=t.O();_N_E=n}]);