(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3365],{56309:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/components/stake/StakeModal",function(){return t(39619)}])},35418:function(e,n,t){"use strict";t.d(n,{$:function(){return u},K:function(){return c}});var r=t(68806);function i(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function o(){var e=i(["\n  query GetDashboard($period: String!, $limit: Int!) {\n    getDashboard(period: $period, limit: $limit) {\n      _id\n      chainId\n      createdAt\n      marketCap\n      runway\n      tosPrice\n      tosSupply\n      sTosSupply\n      lTosSupply\n      totalValueStaked\n      treasuryBalance\n      updatedAt\n    }\n  }\n"]);return o=function(){return e},e}function a(){var e=i(["\n  query GetDashboardCard($period: String!, $limit: Int!) {\n    getDashboardCard(period: $period, limit: $limit) {\n      tosPrice\n      backingPerTos\n      ltosPrice\n      mintingRate\n      ltosIndex\n      chainId\n    }\n  }\n"]);return a=function(){return e},e}var c=(0,r.Ps)(o()),u=(0,r.Ps)(a())},66028:function(e,n,t){"use strict";function r(){var e,n,t=(e=["\n  query GetTokenPrice($tokenId: String!) {\n    getTokenPrice(tokenId: $tokenId) {\n      price\n    }\n  }\n"],n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}})));return r=function(){return t},t}t.d(n,{N:function(){return i}});var i=(0,t(68806).Ps)(r())},81271:function(e,n,t){"use strict";var r=t(34051),i=t.n(r),o=t(37243),a=t(67294),c=t(35418),u=t(76312),s=t(45093),d=t(68462),l=t(79042),f=t(77044),v=t(35553),p=t(2593),m=t(50266),b=t(88586);function P(e,n,t,r,i,o,a){try{var c=e[o](a),u=c.value}catch(s){return void t(s)}c.done?n(u):Promise.resolve(u).then(r,i)}function g(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var o=e.apply(n,t);function a(e){P(o,r,i,a,c,"next",e)}function c(e){P(o,r,i,a,c,"throw",e)}a(void 0)}))}}n.Z=function(){var e=(0,o.Z)().selectedModalData,n=(0,a.useState)(void 0),t=n[0],r=n[1],P=(0,a.useState)(void 0),h=(P[0],P[1],(0,u.aM)(c.K,{variables:{period:"-1",limit:1},pollInterval:1e4})),k=(h.loading,h.error,h.data),N=(0,d.Z)(),y=N.BondDepositoryProxy_CONTRACT,S=N.StakingV2Proxy_CONTRACT,x=(0,f.Ge)(),_=(0,m.Z)().priceData,w=(b.Z.mainnetGasPrice,b.Z.minBondGasPrice);return(0,a.useEffect)((function(){function n(){return(n=g(i().mark((function n(){var t,o,a,c,u,d,f,m,b,P,g,h,N,$,T;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(e&&k&&_&&y)){n.next=28;break}return n.next=4,y.viewMarket(e.index);case 4:return o=n.sent,n.next=7,null===y||void 0===y?void 0:y.purchasableAssetAmountAtOneTime(o.tosPrice,o.maxPayout);case 7:return a=n.sent,n.next=10,null===S||void 0===S?void 0:S.possibleIndex();case 10:return c=n.sent,n.next=13,y.getBonds();case 13:return u=n.sent,n.next=16,null===(t=x.library)||void 0===t?void 0:t.getGasPrice();case 16:d=n.sent,Number(v.formatUnits(d,9)),f=(0,l.WN)({amount:null===a||void 0===a?void 0:a.toString()}),m=(0,l.WN)({amount:null===c||void 0===c?void 0:c.toString()}),b=u[4],P=1/Number(b.toString())*1e18*_.ethPrice,g=(0,s.Z)(k.getDashboard[0].tosPrice),h=Number(g)-Number(e.bondingPrice)/(100*Number(g)),N=Number(e.discountRate.replaceAll("%",""))/100,$=p.O$.from((0,l.Az)(w)).mul(d).div((0,l.Az)(N.toString())),T=(0,l.WN)({amount:$.toString(),decimalPoints:6,decimalPlaces:6}),r({bondPrice:"$".concat((0,s.Z)(P)),marketPrice:"$".concat(g),discount:"".concat((0,s.Z)(h),"%"),minBond:"".concat(Number(T)<0?"0.000000":T),maxBond:"".concat((0,s.Z)(f)),ltosIndex:"".concat((0,s.Z)(m))});case 28:case"end":return n.stop()}}),n)})))).apply(this,arguments)}try{!function(){n.apply(this,arguments)}()}catch(t){console.log("**useBondModal err**"),console.log(t)}}),[e,k,y,S,null===x||void 0===x?void 0:x.library,_,w]),{bondModalData:t}}},50266:function(e,n,t){"use strict";var r=t(76312),i=t(35418),o=t(66028),a=t(67294);n.Z=function(){var e=(0,a.useState)(void 0),n=e[0],t=e[1],c=(0,r.aM)(i.K,{variables:{period:"-1",limit:1}}),u=(c.loading,c.error,c.data),s=(0,r.aM)(o.N,{variables:{tokenId:"ethereum"}}).data;return(0,a.useEffect)((function(){if(u&&s){var e,n=(null===(e=u.getDashboard[0])||void 0===e?void 0:e.tosPrice)||"0",r=s.getTokenPrice.price;t({tosPrice:Number(n),ethPrice:Number(r)})}}),[u,s]),{priceData:n}}}},function(e){e.O(0,[4885,2678,8658,8555,246,7277,9683,3942,9002,8227,4824,9619,9774,2888,179],(function(){return n=56309,e(e.s=n);var n}));var n=e.O();_N_E=n}]);