(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9393],{76491:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/components/stake/UpdateModal",function(){return n(96100)}])},27541:function(e,t,n){"use strict";var r=n(85893),o=n(48940),a=n(45161),i=n(93717),c=n(82140),u=n(33090),s=n(71293),l=n(32735),f=n(14225),d=n(60938),p=n(27520),h=n(67294);function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){v(e,t,n[t])}))}return e}t.Z=function(e){e.placeHolder;var t=e.w,n=e.h,m=e.isDisabled,b=e.atomKey,g=e.isError,y=e.style,k=e.pageKey,S=e.recoilKey,j=e.maxValue,w=e.errorMsg,_=(e.rightUnit,e.minValue,e.leftDays),N=e.leftTime,O=e.isDisabledText,T=e.endTime,C=e.isManageModal,E=((0,o.F)(),(0,a.If)().colorMode),M=(0,h.useState)("Weeks"),P=M[0],Z=M[1],I=(0,h.useState)(!1),A=I[0],z=I[1],D=(0,h.useState)(!1),V=(D[0],D[1],(0,p.Z)().bp700px),W=(0,d.Z)(k,S),R=W.inputValue,B=W.value,H=W.setValue,U=(0,h.useMemo)((function(){return B&&b&&B[b]?B[b]<10?"27px":B[b]&&B[b]<100?"37px":"42px":"27px"}),[B,b]);return(0,r.jsxs)(i.k,x({flexDir:"column",pos:"relative"},y,{children:[(0,r.jsxs)(c.B,{children:[(0,r.jsx)(u.I,{isInvalid:g,isDisabled:m,w:t||270,h:n||45,ml:"auto",borderRadius:8,borderWidth:1,borderColor:"light"===E?"#e8edf2":"#313442",fontSize:14,color:!1===A?"#64646f":"light"===E?"gray.800":m?"#64646f":"#f1f1f1",_placeholder:{color:"#64646f"},_hover:{borderColor:"light"===E?"#c6cbd9":"#535353"},focusBorderColor:"none",_focus:g?{}:{outline:"none",color:"light"===E?"gray.800":"#f1f1f1",boxShadow:"",borderColor:"light"===E?"#9a9aaf":"#8a8a98"},outline:"none",errorBorderColor:m?"none":"#e23738",value:"".concat(m?O||"-":B[b]),onChange:function(e){if(!isNaN(e.target.value)&&!e.target.value.includes(".")&&!e.target.value.includes(" "))return 0===Number(e.target.value)&&(console.log("-1-"),Z("Weeks"),z(!1)),Number(e.target.value)>1&&(console.log("-2-"),Z("Weeks"),z(!0)),1===Number(e.target.value)&&(console.log("-3-"),Z("Week"),z(!0)),H(x({},R,v({},b,e.target.value)))}}),(0,r.jsx)(i.k,{pos:"absolute",left:U,textAlign:"center",lineHeight:"39px",fontSize:14,children:(!1===m||!0===C)&&_&&N&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.x,{color:!1===A?"#64646f":"light"===E?"gray.800":m?"#64646f":"#f1f1f1",children:P}),(0,r.jsxs)(s.x,{fontSize:12,ml:"9px",mr:"3px",color:A?"dark"===E?"#8b8b93":"#7e7e8f":"",children:[_," ",1===Number(_)?"Day":"Days"," ",N]})]})}),(0,r.jsx)(l.x,{mr:"8px",display:"flex",alignItems:"center",children:(0,r.jsx)(f.z,{w:"30px",h:"20px",color:"dark"===E?"#64646f":"#7e7e8f",_hover:{color:"#2775ff"},bg:"none",fontSize:14,fontWeight:600,isDisabled:m,onClick:function(){R[b]!==j&&j&&H(x({},R,v({},b,j)))},children:"Max"})})]}),g&&!1===m&&(0,r.jsx)(i.k,{w:"100%",fontSize:12,color:"#e23738",pos:"absolute",mt:"40px",textAlign:"right",justifyContent:"center",children:(0,r.jsx)(s.x,{children:w})}),T&&(0,r.jsx)(i.k,{pos:"absolute",top:"48px",w:t||270,justifyContent:V?"flex-start":"center",children:(0,r.jsxs)(s.x,{children:["End Time : ",T]})})]}))}},46850:function(e,t,n){"use strict";var r=n(34051),o=n.n(r),a=n(5555),i=n(35553),c=n(83077),u=n(68462),s=n(67294);function l(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(s){return void n(s)}c.done?t(u):Promise.resolve(u).then(r,o)}function f(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){l(a,r,o,i,c,"next",e)}function c(e){l(a,r,o,i,c,"throw",e)}i(void 0)}))}}t.Z=function(){var e=(0,s.useState)(void 0),t=e[0],n=e[1],r=(0,s.useState)(void 0),l=r[0],d=r[1],p=(0,u.Z)().StakingV2Proxy_CONTRACT,h=(0,c.O)().blockNumber;return(0,s.useEffect)((function(){function e(){return(e=f(o().mark((function e(){var t,r,c,u,s,l,f,h,v;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!p){e.next=18;break}return e.next=3,p.possibleIndex();case 3:return t=e.sent,e.next=6,p.rebasePerEpoch();case 6:return r=e.sent,c=i.formatEther(r),u=i.formatUnits(t.toString(),18),s=u.split("."),l=s[0]+"."+s[1].slice(0,7),e.next=13,p.epoch();case 13:f=e.sent,h=f.end,v=(0,a.df)(h.toString(),"HH:mm:ss"),n({ltosIndex:l,ltosIndexBN:t,nextRebase:v}),d(Number(c));case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(function(){return e.apply(this,arguments)})().catch((function(e){console.log("**useStakeV2 err**"),console.log(e)}))}),[p,h]),{stakeV2:t,rebasePerEpoch:l}}},5371:function(e,t,n){"use strict";var r=n(34051),o=n.n(r),a=n(45093),i=n(79042),c=n(5555),u=n(32082),s=n(5835),l=n(89406),f=n(68462),d=n(60938),p=n(37243),h=n(67294),v=n(74506);function x(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(s){return void n(s)}c.done?t(u):Promise.resolve(u).then(r,o)}function m(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){x(a,r,o,i,c,"next",e)}function c(e){x(a,r,o,i,c,"throw",e)}i(void 0)}))}}t.Z=function(){var e,t=(0,h.useState)("-"),n=t[0],r=t[1],x=(0,h.useState)("-"),b=x[0],g=x[1],y=(0,h.useState)(1),k=y[0],S=y[1],j=(0,h.useState)("-"),w=j[0],_=j[1],N=(0,h.useState)("-"),O=N[0],T=N[1],C=(0,f.Z)(),E=C.StakingV2Proxy_CONTRACT,M=(C.LockTOS_CONTRACT,(0,l.Z)()),P=M.stakeId,Z=(M.connectId,(0,s.Z)()),I=((0,p.Z)().selectedModalData,(0,d.Z)("Stake_screen","update_modal").inputValue),A=Number(null===Z||void 0===Z||null===(e=Z.currentTosAmount)||void 0===e?void 0:e.replaceAll(",",""))+Number(I.stake_updateModal_tos_balance),z=(0,v.Z)(A,Number(I.stake_updateModal_period)),D=z.stosReward,V=z.newEndTime,W=(0,u.Z)().epochUnit;return(0,h.useEffect)((function(){function e(){return(e=m(o().mark((function e(){var t,n,r,a,i,u,s,l,f,d,p;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:E&&P&&Z&&(t=Z.currentEndTime,n=Z.currentEndTimeStamp,g("".concat(t," (").concat((0,c.Ze)(),")")),r=(0,c.kv)(),i=(a=n-r)/W,u=(a-604800*Math.floor(i))/86400,s=a-604800*Math.floor(i)-86400*Math.floor(u),l=(0,c.g9)(s,"HH:mm").hours,f=(0,c.g9)(s,"HH:mm").mins,d=1===l.toString().length?"0".concat(l):"".concat(l),p=1===f.toString().length?"0".concat(f):"".concat(f),S(Math.floor(i)),_(String(Math.floor(u))),T("".concat(d,":").concat(p)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(function(){return e.apply(this,arguments)})().catch((function(e){}))}),[P,E,Z,W]),(0,h.useEffect)((function(){function e(){return(e=m(o().mark((function e(){var t,n,c,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!E||!(null===Z||void 0===Z?void 0:Z.ltosBalance)||void 0===I.stake_updateModal_tos_balance){e.next=8;break}return t=(0,i.Az)(I.stake_updateModal_tos_balance.replaceAll(",","")),e.next=4,E.getTosToLtosPossibleIndex(t);case 4:n=e.sent,c=(0,i.WN)({amount:n}),u=Number(null===Z||void 0===Z?void 0:Z.ltosBalance.replaceAll(",",""))+Number(null===c||void 0===c?void 0:c.replaceAll(",","")),r((0,a.Z)(u));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(function(){return e.apply(this,arguments)})().catch((function(e){console.log("**useUpdateModalData2 err**"),console.log(e)}))}),[E,I,Z]),{currentEndTime:b,newEndTime:V,leftWeeks:k,leftDays:w,leftTime:O,newStosBalance:D,newLtosBalance:n,totalTosAmount:A}}},43382:function(e,t,n){"use strict";var r=n(34051),o=n.n(r),a=n(79042),i=n(77044),c=n(67294),u=n(28450),s=n(83077),l=n(68462);function f(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(s){return void n(s)}c.done?t(u):Promise.resolve(u).then(r,o)}function d(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){f(a,r,o,i,c,"next",e)}function c(e){f(a,r,o,i,c,"throw",e)}i(void 0)}))}}t.Z=function(){var e=(0,c.useState)({tosAllowance:void 0,stakeList:void 0,simpleStakingId:void 0}),t=e[0],n=e[1],r=(0,l.Z)().TOS_CONTRACT,f=(0,i.Ge)().account,p=u.Z.StakingV2Proxy,h=(0,s.O)().blockNumber,v=(0,l.Z)().StakingV2Proxy_CONTRACT;return(0,c.useEffect)((function(){function e(){return(e=d(o().mark((function e(){var t,i,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r&&f&&v)){e.next=9;break}return e.next=4,r.allowance(f,p);case 4:return i=e.sent,e.next=7,v.stakingOf(f);case 7:return c=e.sent,e.abrupt("return",n({tosAllowance:Number((0,a.WN)({amount:i.toString()})),stakeList:c,simpleStakingId:null===(t=c[1])||void 0===t?void 0:t.toString()}));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(function(){return e.apply(this,arguments)})().then((function(e){void 0!==e&&(console.log("**fetchUseUser err**"),console.log(e))}))}),[r,f,p,h,v]),t}},60316:function(e,t,n){"use strict";n.r(t);var r=n(85893),o=n(45161),a=n(93717),i=n(85129),c=n(38658),u=n(88586),s=n(60938),l=n(67294);function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){f(e,t,n[t])}))}return e}t.default=function(e){var t=e.pageKey,n=e.subKey,p=e.periodKey,h=e.balanceKey,v=e.isSlideDisabled,x=e.minValue,m={mt:"2",ml:"-2.5",fontSize:"sm"},b=(0,s.Z)(t,n),g=b.inputValue,y=(b.value,b.setValue),k=(0,l.useState)(0),S=k[0],j=k[1],w=(0,l.useState)(!1),_=w[0],N=(w[1],(0,o.If)().colorMode),O=(0,l.useState)(!1),T=O[0],C=O[1];return(0,l.useEffect)((function(){0!==S&&C(!0)}),[S]),(0,l.useEffect)((function(){var e;if(h&&T&&(""===g[h]||void 0===g[h]))return y(d({},g,(f(e={},h,0),f(e,p,S),e)));return y(d({},g,f({},p,S)))}),[S,p,h,T]),(0,l.useEffect)((function(){if(g[p])return j(Number(g[p]))}),[g,p]),(0,l.useEffect)((function(){return j(v?0:u.Z.modalMaxWeeks)}),[v]),(0,r.jsx)(a.k,{w:"100%",h:"70px",pos:"relative",children:(0,r.jsxs)(i.iR,{focusThumbOnChange:!1,"aria-label":"slider-ex-1",defaultValue:0,min:0,max:u.Z.modalMaxWeeks,value:S,onChange:function(e){return j(x&&x>e?x:e)},h:"10px",alignSelf:"end",isDisabled:v,children:[(0,r.jsx)(i.jz,d({value:0},m,{children:"7d"})),(0,r.jsx)(i.jz,d({value:52},m,{children:"1y"})),(0,r.jsx)(i.jz,d({value:104},m,{children:"2y"})),(0,r.jsx)(i.jz,d({value:155},m,{children:"3y"})),(0,r.jsxs)(i.Uj,{bg:"light"===N?"#e7edf3":"#353d48",children:[(0,r.jsx)(i.Ms,{bg:"#2775ff"}),x&&(0,r.jsx)(i.Ms,{maxW:"".concat(x/155*100,"%"),bg:"#2bb415"})]}),(0,r.jsx)(c.u,{color:"light"===N?"#07070c":"#f1f1f1",placement:"top",bg:"transparent",w:"50px",display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",fontSize:"15px",fontWeight:600,isOpen:_,label:"".concat(S," sTOS"),children:(0,r.jsx)(i.gs,{})})]})})}},33090:function(e,t,n){"use strict";n.d(t,{I:function(){return l}});var r=n(28912),o=n(16554),a=n(77030),i=n(33179),c=n(22548),u=n(25432),s=n(85893),l=(0,o.G)((function(e,t){const{htmlSize:n,...o}=e,l=(0,a.jC)("Input",o),f=(0,i.Lr)(o),d=(0,r.Y)(f),p=(0,u.cx)("chakra-input",e.className);return(0,s.jsx)(c.m.input,{size:n,...d,__css:l.field,ref:t,className:p})}));l.displayName="Input",l.id="Input"}},function(e){e.O(0,[4885,2678,8658,8555,246,7277,3942,9002,6100,9774,2888,179],(function(){return t=76491,e(e.s=t);var t}));var t=e.O();_N_E=t}]);