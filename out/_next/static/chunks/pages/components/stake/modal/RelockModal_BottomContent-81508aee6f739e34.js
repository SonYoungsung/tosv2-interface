(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4459],{80008:function(t,e,n){(t.exports=n(85177)).tz.load(n(91128))},85177:function(t,e,n){var o,r,i;!function(a,s){"use strict";t.exports?t.exports=s(n(30381)):(r=[n(30381)],void 0===(i="function"===typeof(o=s)?o.apply(e,r):o)||(t.exports=i))}(0,(function(t){"use strict";void 0===t.version&&t.default&&(t=t.default);var e,n={},o={},r={},i={},a={};t&&"string"===typeof t.version||M("Moment Timezone requires Moment.js. See https://momentjs.com/timezone/docs/#/use-it/browser/");var s=t.version.split("."),u=+s[0],l=+s[1];function c(t){return t>96?t-87:t>64?t-29:t-48}function f(t){var e=0,n=t.split("."),o=n[0],r=n[1]||"",i=1,a=0,s=1;for(45===t.charCodeAt(0)&&(e=1,s=-1);e<o.length;e++)a=60*a+c(o.charCodeAt(e));for(e=0;e<r.length;e++)i/=60,a+=c(r.charCodeAt(e))*i;return a*s}function d(t){for(var e=0;e<t.length;e++)t[e]=f(t[e])}function p(t,e){var n,o=[];for(n=0;n<e.length;n++)o[n]=t[e[n]];return o}function h(t){var e=t.split("|"),n=e[2].split(" "),o=e[3].split(""),r=e[4].split(" ");return d(n),d(o),d(r),function(t,e){for(var n=0;n<e;n++)t[n]=Math.round((t[n-1]||0)+6e4*t[n]);t[e-1]=1/0}(r,o.length),{name:e[0],abbrs:p(e[1].split(" "),o),offsets:p(n,o),untils:r,population:0|e[5]}}function m(t){t&&this._set(h(t))}function v(t,e){this.name=t,this.zones=e}function b(t){var e=t.toTimeString(),n=e.match(/\([a-z ]+\)/i);"GMT"===(n=n&&n[0]?(n=n[0].match(/[A-Z]/g))?n.join(""):void 0:(n=e.match(/[A-Z]{3,5}/g))?n[0]:void 0)&&(n=void 0),this.at=+t,this.abbr=n,this.offset=t.getTimezoneOffset()}function _(t){this.zone=t,this.offsetScore=0,this.abbrScore=0}function g(t,e){for(var n,o;o=6e4*((e.at-t.at)/12e4|0);)(n=new b(new Date(t.at+o))).offset===t.offset?t=n:e=n;return t}function S(t,e){return t.offsetScore!==e.offsetScore?t.offsetScore-e.offsetScore:t.abbrScore!==e.abbrScore?t.abbrScore-e.abbrScore:t.zone.population!==e.zone.population?e.zone.population-t.zone.population:e.zone.name.localeCompare(t.zone.name)}function y(t,e){var n,o;for(d(e),n=0;n<e.length;n++)o=e[n],a[o]=a[o]||{},a[o][t]=!0}function k(t){var e,n,o,r,s=t.length,u={},l=[],c={};for(e=0;e<s;e++)if(o=t[e].offset,!c.hasOwnProperty(o)){for(n in r=a[o]||{})r.hasOwnProperty(n)&&(u[n]=!0);c[o]=!0}for(e in u)u.hasOwnProperty(e)&&l.push(i[e]);return l}function w(){try{var t=Intl.DateTimeFormat().resolvedOptions().timeZone;if(t&&t.length>3){var e=i[T(t)];if(e)return e;M("Moment Timezone found "+t+" from the Intl api, but did not have that data loaded.")}}catch(c){}var n,o,r,a=function(){var t,e,n,o,r=(new Date).getFullYear()-2,i=new b(new Date(r,0,1)),a=i.offset,s=[i];for(o=1;o<48;o++)(n=new Date(r,o,1).getTimezoneOffset())!==a&&(t=g(i,e=new b(new Date(r,o,1))),s.push(t),s.push(new b(new Date(t.at+6e4))),i=e,a=n);for(o=0;o<4;o++)s.push(new b(new Date(r+o,0,1))),s.push(new b(new Date(r+o,6,1)));return s}(),s=a.length,u=k(a),l=[];for(o=0;o<u.length;o++){for(n=new _(z(u[o]),s),r=0;r<s;r++)n.scoreOffsetAt(a[r]);l.push(n)}return l.sort(S),l.length>0?l[0].zone.name:void 0}function T(t){return(t||"").toLowerCase().replace(/\//g,"_")}function O(t){var e,o,r,a;for("string"===typeof t&&(t=[t]),e=0;e<t.length;e++)a=T(o=(r=t[e].split("|"))[0]),n[a]=t[e],i[a]=o,y(a,r[2].split(" "))}function z(t,e){t=T(t);var r,a=n[t];return a instanceof m?a:"string"===typeof a?(a=new m(a),n[t]=a,a):o[t]&&e!==z&&(r=z(o[t],z))?((a=n[t]=new m)._set(r),a.name=i[t],a):null}function x(t){var e,n,r,a;for("string"===typeof t&&(t=[t]),e=0;e<t.length;e++)r=T((n=t[e].split("|"))[0]),a=T(n[1]),o[r]=a,i[r]=n[0],o[a]=r,i[a]=n[1]}function A(t){var e="X"===t._f||"x"===t._f;return!(!t._a||void 0!==t._tzm||e)}function M(t){"undefined"!==typeof console&&"function"===typeof console.error&&console.error(t)}function N(e){var n,o=Array.prototype.slice.call(arguments,0,-1),r=arguments[arguments.length-1],i=t.utc.apply(null,o);return!t.isMoment(e)&&A(i)&&(n=z(r))&&i.add(n.parse(i),"minutes"),i.tz(r),i}(u<2||2===u&&l<6)&&M("Moment Timezone requires Moment.js >= 2.6.0. You are using Moment.js "+t.version+". See momentjs.com"),m.prototype={_set:function(t){this.name=t.name,this.abbrs=t.abbrs,this.untils=t.untils,this.offsets=t.offsets,this.population=t.population},_index:function(t){var e;if((e=function(t,e){var n,o=e.length;if(t<e[0])return 0;if(o>1&&e[o-1]===1/0&&t>=e[o-2])return o-1;if(t>=e[o-1])return-1;for(var r=0,i=o-1;i-r>1;)e[n=Math.floor((r+i)/2)]<=t?r=n:i=n;return i}(+t,this.untils))>=0)return e},countries:function(){var t=this.name;return Object.keys(r).filter((function(e){return-1!==r[e].zones.indexOf(t)}))},parse:function(t){var e,n,o,r,i=+t,a=this.offsets,s=this.untils,u=s.length-1;for(r=0;r<u;r++)if(e=a[r],n=a[r+1],o=a[r?r-1:r],e<n&&N.moveAmbiguousForward?e=n:e>o&&N.moveInvalidForward&&(e=o),i<s[r]-6e4*e)return a[r];return a[u]},abbr:function(t){return this.abbrs[this._index(t)]},offset:function(t){return M("zone.offset has been deprecated in favor of zone.utcOffset"),this.offsets[this._index(t)]},utcOffset:function(t){return this.offsets[this._index(t)]}},_.prototype.scoreOffsetAt=function(t){this.offsetScore+=Math.abs(this.zone.utcOffset(t.at)-t.offset),this.zone.abbr(t.at).replace(/[^A-Z]/g,"")!==t.abbr&&this.abbrScore++},N.version="0.5.45",N.dataVersion="",N._zones=n,N._links=o,N._names=i,N._countries=r,N.add=O,N.link=x,N.load=function(t){O(t.zones),x(t.links),function(t){var e,n,o,i;if(t&&t.length)for(e=0;e<t.length;e++)n=(i=t[e].split("|"))[0].toUpperCase(),o=i[1].split(" "),r[n]=new v(n,o)}(t.countries),N.dataVersion=t.version},N.zone=z,N.zoneExists=function t(e){return t.didShowError||(t.didShowError=!0,M("moment.tz.zoneExists('"+e+"') has been deprecated in favor of !moment.tz.zone('"+e+"')")),!!z(e)},N.guess=function(t){return e&&!t||(e=w()),e},N.names=function(){var t,e=[];for(t in i)i.hasOwnProperty(t)&&(n[t]||n[o[t]])&&i[t]&&e.push(i[t]);return e.sort()},N.Zone=m,N.unpack=h,N.unpackBase60=f,N.needsOffset=A,N.moveInvalidForward=!0,N.moveAmbiguousForward=!1,N.countries=function(){return Object.keys(r)},N.zonesForCountry=function(t,e){var n;if(n=(n=t).toUpperCase(),!(t=r[n]||null))return null;var o=t.zones.sort();return e?o.map((function(t){return{name:t,offset:z(t).utcOffset(new Date)}})):o};var j,C=t.fn;function Z(t){return function(){return this._z?this._z.abbr(this):t.call(this)}}function P(t){return function(){return this._z=null,t.apply(this,arguments)}}t.tz=N,t.defaultZone=null,t.updateOffset=function(e,n){var o,r=t.defaultZone;if(void 0===e._z&&(r&&A(e)&&!e._isUTC&&e.isValid()&&(e._d=t.utc(e._a)._d,e.utc().add(r.parse(e),"minutes")),e._z=r),e._z)if(o=e._z.utcOffset(e),Math.abs(o)<16&&(o/=60),void 0!==e.utcOffset){var i=e._z;e.utcOffset(-o,n),e._z=i}else e.zone(o,n)},C.tz=function(e,n){if(e){if("string"!==typeof e)throw new Error("Time zone name must be a string, got "+e+" ["+typeof e+"]");return this._z=z(e),this._z?t.updateOffset(this,n):M("Moment Timezone has no data for "+e+". See http://momentjs.com/timezone/docs/#/data-loading/."),this}if(this._z)return this._z.name},C.zoneName=Z(C.zoneName),C.zoneAbbr=Z(C.zoneAbbr),C.utc=P(C.utc),C.local=P(C.local),C.utcOffset=(j=C.utcOffset,function(){return arguments.length>0&&(this._z=null),j.apply(this,arguments)}),t.tz.setDefault=function(e){return(u<2||2===u&&l<9)&&M("Moment Timezone setDefault() requires Moment.js >= 2.9.0. You are using Moment.js "+t.version+"."),t.defaultZone=e?z(e):null,t};var E=t.momentProperties;return"[object Array]"===Object.prototype.toString.call(E)?(E.push("_z"),E.push("_a")):E&&(E._z=null),t}))},86874:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/components/stake/modal/RelockModal_BottomContent",function(){return n(19400)}])},46850:function(t,e,n){"use strict";var o=n(34051),r=n.n(o),i=n(5555),a=n(35553),s=n(83077),u=n(68462),l=n(67294);function c(t,e,n,o,r,i,a){try{var s=t[i](a),u=s.value}catch(l){return void n(l)}s.done?e(u):Promise.resolve(u).then(o,r)}function f(t){return function(){var e=this,n=arguments;return new Promise((function(o,r){var i=t.apply(e,n);function a(t){c(i,o,r,a,s,"next",t)}function s(t){c(i,o,r,a,s,"throw",t)}a(void 0)}))}}e.Z=function(){var t=(0,l.useState)(void 0),e=t[0],n=t[1],o=(0,l.useState)(void 0),c=o[0],d=o[1],p=(0,u.Z)().StakingV2Proxy_CONTRACT,h=(0,s.O)().blockNumber;return(0,l.useEffect)((function(){function t(){return(t=f(r().mark((function t(){var e,o,s,u,l,c,f,h,m;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!p){t.next=18;break}return t.next=3,p.possibleIndex();case 3:return e=t.sent,t.next=6,p.rebasePerEpoch();case 6:return o=t.sent,s=a.formatEther(o),u=a.formatUnits(e.toString(),18),l=u.split("."),c=l[0]+"."+l[1].slice(0,7),t.next=13,p.epoch();case 13:f=t.sent,h=f.end,m=(0,i.df)(h.toString(),"HH:mm:ss"),n({ltosIndex:c,ltosIndexBN:e,nextRebase:m}),d(Number(s));case 18:case"end":return t.stop()}}),t)})))).apply(this,arguments)}(function(){return t.apply(this,arguments)})().catch((function(t){console.log("**useStakeV2 err**"),console.log(t)}))}),[p,h]),{stakeV2:e,rebasePerEpoch:c}}},31617:function(t,e,n){"use strict";var o=n(34051),r=n.n(o),i=n(45093),a=n(79042),s=n(2593),u=n(89406),l=n(68462),c=n(60938),f=n(37243),d=n(67294),p=n(74506);function h(t,e,n,o,r,i,a){try{var s=t[i](a),u=s.value}catch(l){return void n(l)}s.done?e(u):Promise.resolve(u).then(o,r)}function m(t){return function(){var e=this,n=arguments;return new Promise((function(o,r){var i=t.apply(e,n);function a(t){h(i,o,r,a,s,"next",t)}function s(t){h(i,o,r,a,s,"throw",t)}a(void 0)}))}}e.Z=function(t){var e=(0,d.useState)("-"),n=e[0],o=e[1],h=(0,d.useState)("-"),v=h[0],b=h[1],_=(0,d.useState)(void 0),g=_[0],S=_[1],y=(0,d.useState)(void 0),k=y[0],w=y[1],T=(0,l.Z)(),O=T.StakingV2Proxy_CONTRACT,z=(T.LockTOS_CONTRACT,(0,u.Z)().stakeId),x=(0,c.Z)("Stake_screen","relock_modal").inputValue,A=(0,d.useState)(0),M=A[0],N=A[1],j=(0,p.Z)(M,x.stake_relockModal_period),C=j.stosReward,Z=j.newEndTime,P=(0,f.Z)(),E=P.selectedModalData;return P.selectedModal,(0,d.useEffect)((function(){function t(){return(t=m(r().mark((function t(){var e,n,o,i,s,u,l,c;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!((null===E||void 0===E?void 0:E.ltosAmount)&&(null===x||void 0===x?void 0:x.stake_relockModal_ltos_balance)&&O)){t.next=15;break}return e=E.ltosAmount,n=Number(e.replaceAll(",",""))-Number(x.stake_relockModal_ltos_balance.replaceAll(",","")),o=(0,a.Az)(n.toString()),t.next=6,O.getLtosToTosPossibleIndex(o);case 6:return i=t.sent,s=(0,a.WN)({amount:i.toString(),localeString:!0,round:!1}),b(null!==s&&void 0!==s?s:"-"),u=(0,a.Az)(e.toString()),t.next=12,O.getLtosToTosPossibleIndex(u);case 12:l=t.sent,c=(0,a.WN)({amount:l.toString(),localeString:!0,round:!1}),S(Number(null===c||void 0===c?void 0:c.replaceAll(",","")));case 15:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[null===E||void 0===E?void 0:E.ltosAmount,null===x||void 0===x?void 0:x.stake_relockModal_ltos_balance,O]),(0,d.useEffect)((function(){function e(){return(e=m(r().mark((function e(){var n,i,u,l,c,f,d,p,h,m;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(O&&z&&x)){e.next=28;break}if(t){e.next=10;break}return n=(0,a.Az)(String(x.stake_relockModal_ltos_balance).replaceAll(" ","")),e.next=5,O.getLtosToTosPossibleIndex(n);case 5:return i=e.sent,u=(0,a.WN)({amount:i.toString(),localeString:!0})||"-",o(u),N(Number(u.replaceAll(",",""))),e.abrupt("return");case 10:if(!t){e.next=28;break}return l=(0,a.Az)(x.stake_relockModal_tos_balance),e.next=14,O.getTosToLtosPossibleIndex(l);case 14:return c=e.sent,e.next=17,O.remainedLtos(z);case 17:return f=e.sent,d=s.O$.from(c).add(f),p=(0,a.WN)({amount:d.toString(),localeString:!0,round:!1})||"-",e.next=22,O.getLtosToTosPossibleIndex(d);case 22:return h=e.sent,m=(0,a.WN)({amount:h.toString(),localeString:!0,round:!1})||"-",o(m),N(Number(x.stake_relockModal_tos_balance.replaceAll(",",""))),w(p),e.abrupt("return");case 28:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(function(){return e.apply(this,arguments)})().catch((function(t){}))}),[z,O,x,C,t]),{newEndTime:Z,inputTosAmount:(0,i.Z)(M),tosValue:n,tosBalance:v,allLtosToTosBalance:g,allLtosBalance:k}}},19400:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return S}});var o=n(85893),r=n(67294),i=n(45093),a=n(93717),s=n(54968),u=n(46850),l=n(83077),c=n(60938),f=n(74506),d=n(31617);var p=function(t){var e,n=(0,c.Z)("Stake_screen","relock_modal").inputValue,o=(0,d.Z)(t),i=(o.newEndTime,o.inputTosAmount,o.tosValue),a=o.allLtosToTosBalance,s=t&&a?Number(null===n||void 0===n||null===(e=n.stake_relockModal_tos_balance)||void 0===e?void 0:e.replaceAll(",",""))+a:Number(i.replaceAll(",","")),p=(0,f.Z)(0,n.stake_relockModal_period),h=p.leftDays,m=p.leftHourAndMin,v=Number(n.stake_relockModal_period),b=(0,r.useMemo)((function(){if(void 0!==h&&void 0!==m&&void 0!==v)return(86400*Number(h)+3600*Number(m.split(":")[0])+60*Number(m.split(":")[1]))/604800+v}),[h,m,v]),_=(0,u.Z)().rebasePerEpoch,g=((0,l.O)().blockTimeStamp,(0,r.useMemo)((function(){if(void 0!==b)return Math.floor(21*b)}),[b])),S=(0,r.useMemo)((function(){if(void 0!==s&&_&&g)return s*Math.pow(1+_,g)}),[s,_,g]);return{newBalanceStos:(0,r.useMemo)((function(){if(void 0!==S&&void 0!==b)return S*b/156}),[S,b])}},h=n(27520),m=n(68506),v=n(4480);function b(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function _(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function g(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var o,r,i=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(o=n.next()).done)&&(i.push(o.value),!e||i.length!==e);a=!0);}catch(u){s=!0,r=u}finally{try{a||null==n.return||n.return()}finally{if(s)throw r}}return i}}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return b(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var S=function(t){var e,n=t.addTos,u=(0,h.Z)().bp700px,l=(0,c.Z)("Stake_screen","relock_modal"),f=l.inputValue,b=(l.setResetValue,l.setValue,(0,d.Z)(n)),S=b.newEndTime,y=b.tosValue,k=b.tosBalance,w=b.allLtosBalance,T=(b.allLtosToTosBalance,p(n).newBalanceStos),O=g((0,v.FV)(s.ws),2),z=(O[0],O[1],(0,v.sJ)(s.lW),[{title:"You Give",content:"".concat(null!==(e=(0,i.Z)(f.stake_relockModal_ltos_balance))&&void 0!==e?e:"-"," LTOS"),secondContent:n?"".concat(f.stake_relockModal_tos_balance," TOS"):void 0,tooltip:"Amount of LTOS and TOS used for staking.",secondTooltip:"Currently worth ".concat(y||"-"," TOS. As LTOS index increases, the number of TOS you can get from unstaking LTOS will also increase.")},{title:"You Will Get",content:"".concat(n?w:(0,i.Z)(f.stake_relockModal_ltos_balance)," LTOS"),secondContent:"".concat((0,i.Z)(T)," sTOS"),thirdContent:n?void 0:"".concat(k," TOS"),tooltip:"Amount of LTOS, sTOS, and TOS you will get after the update. ",secondTooltip:"Currently worth ".concat(y," TOS. As LTOS index increases, the number of TOS you can get from unstaking LTOS will also increase."),thirdTooltip:"sTOS\u2019s lock-up period is calculated relative to Thursday 00:00 (UTC+0).",fourthTooltip:n?void 0:"Any LTOS that does not get relocked is returned to you in TOS."},{title:"New End Time",content:S,tooltip:"LTOS can be unstaked after this time."}]);return(0,o.jsx)(a.k,{flexDir:"column",columnGap:"9px",mb:"30px",px:u?"20px":"50px",children:z.map((function(t){return(0,r.createElement)(m.default,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),o.forEach((function(e){_(t,e,n[e])}))}return t}({},t,{key:t.title}))}))})}},24027:function(t,e,n){"use strict";n.d(e,{I:function(){return s}});var o=n(36948),r=n(16554),i=n(67294),a=n(85893);function s(t){const{viewBox:e="0 0 24 24",d:n,displayName:s,defaultProps:u={}}=t,l=i.Children.toArray(t.path),c=(0,r.G)(((t,r)=>(0,a.jsx)(o.J,{ref:r,viewBox:e,...u,...t,children:l.length?l:(0,a.jsx)("path",{fill:"currentColor",d:n})})));return c.displayName=s,c}},21371:function(t,e,n){"use strict";n.d(e,{w:function(){return i}});var o=n(24027),r=n(85893),i=(0,o.I)({displayName:"QuestionOutlineIcon",path:(0,r.jsxs)("g",{stroke:"currentColor",strokeWidth:"1.5",children:[(0,r.jsx)("path",{strokeLinecap:"round",fill:"none",d:"M9,9a3,3,0,1,1,4,2.829,1.5,1.5,0,0,0-1,1.415V14.25"}),(0,r.jsx)("path",{fill:"none",strokeLinecap:"round",d:"M12,17.25a.375.375,0,1,0,.375.375A.375.375,0,0,0,12,17.25h0"}),(0,r.jsx)("circle",{fill:"none",strokeMiterlimit:"10",cx:"12",cy:"12",r:"11.25"})]})})}},function(t){t.O(0,[4885,2678,8658,3942,9774,2888,179],(function(){return e=86874,t(t.s=e);var e}));var e=t.O();_N_E=e}]);