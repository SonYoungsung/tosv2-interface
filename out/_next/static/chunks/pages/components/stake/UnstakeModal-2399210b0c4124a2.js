(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[182],{7751:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/components/stake/UnstakeModal",function(){return n(52498)}])},95787:function(t,e,n){"use strict";var r=n(85893),a=n(45161),o=n(38658),u=n(21371);e.Z=function(t){var e=(0,a.If)().colorMode,n=t.label;return(0,r.jsx)(o.u,{display:0===(null===n||void 0===n?void 0:n.length)?"none":"flex",placement:"top",label:n,bg:"dark"===e?"#1f2128":"#fff",borderRadius:"3px",color:"light"===e?"#07070c":"#8b8b93",fontSize:"12px",border:"light"===e?"solid 1px #e8edf2":"solid 1px #313442",children:(0,r.jsx)(u.w,{display:0===(null===n||void 0===n?void 0:n.length)?"none":"",h:"16px",minW:"16px"})})}},88586:function(t,e){"use strict";e.Z={rebase:{epochLength:28800,beginEpochEnd:1668682800},LOCKTOS_maxWeeks:156,LOCKTOS_epochUnit:604800,modalMaxWeeks:155,rebasePerEpoch:8704505e-11,rebasePeriod:28800,mainnetGasPrice:"6849315",minBondGasPrice:"279458",errMsg:{balanceExceed:"Input has exceeded your balance",bondZeroInput:"Input has to be greater than 0",periodExceed:"Must be between 1 and 155",stakePeriodExceed:"Must be between 0 and 155",managePeriodExceed:"New lock-up period must be equal or greater than the existing lock-up period",zeroInput:"Input has to be equal to or greater than 0",periodExceedThanMaximum:"Must be less than 156 weeks"}}},35418:function(t,e,n){"use strict";n.d(e,{$:function(){return l},K:function(){return i}});var r=n(68806);function a(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function o(){var t=a(["\n  query GetDashboard($period: String!, $limit: Int!) {\n    getDashboard(period: $period, limit: $limit) {\n      _id\n      chainId\n      createdAt\n      marketCap\n      runway\n      tosPrice\n      tosSupply\n      sTosSupply\n      lTosSupply\n      totalValueStaked\n      treasuryBalance\n      updatedAt\n    }\n  }\n"]);return o=function(){return t},t}function u(){var t=a(["\n  query GetDashboardCard($period: String!, $limit: Int!) {\n    getDashboardCard(period: $period, limit: $limit) {\n      tosPrice\n      backingPerTos\n      ltosPrice\n      mintingRate\n      ltosIndex\n      chainId\n    }\n  }\n"]);return u=function(){return t},t}var i=(0,r.Ps)(o()),l=(0,r.Ps)(u())},36192:function(t,e,n){"use strict";var r=n(45093),a=n(76312),o=n(77044),u=n(35418),i=n(46850),l=n(83077),c=n(67294);e.Z=function(){var t=(0,c.useState)("-"),e=t[0],n=t[1],s=(0,o.Ge)().account,d=(0,i.Z)().stakeV2,f=(0,a.aM)(u.$,{variables:{period:"-1",limit:1},pollInterval:1e4}),p=(f.loading,f.error,f.data),v=(0,l.O)().blockNumber;return(0,c.useEffect)((function(){if(s){var t=null===d||void 0===d?void 0:d.ltosIndex;if(t)return n(t)}if(p){var e=(null===p||void 0===p?void 0:p.getDashboardCard[0]).ltosIndex;return n((0,r.Z)(e,7))}}),[p,s,d,v]),{ltosIndex:e}}},60938:function(t,e,n){"use strict";n.d(e,{Z:function(){return w}});var r=n(4480),a={bond_modal_period:155,bond_modal_balance:void 0},o=(0,r.cn)({key:"bond_bondModal_input",default:a}),u=(0,r.nZ)({key:"bond_bondModal_input_state",get:function(t){return(0,t.get)(o)}});function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function l(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,o=[],u=!0,i=!1;try{for(n=n.call(t);!(u=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);u=!0);}catch(l){i=!0,a=l}finally{try{u||null==n.return||n.return()}finally{if(i)throw a}}return o}}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var c=function(t){var e=(0,r.sJ)(u),n=l((0,r.FV)(o),2),a=n[0],i=n[1],c=(0,r.rb)(o);return"bond_modal"===t?{inputValue:e,value:a,setValue:i,resetValue:c}:{inputValue:void 0,value:void 0,setValue:void 0,resetValue:void 0}},s=n(88586).Z.modalMaxWeeks,d={stake_modal_period:s,stake_modal_balance:void 0},f=(0,r.cn)({key:"stake_stakeModal_input",default:d}),p=(0,r.nZ)({key:"stake_stakeModal_input_state",get:function(t){return(0,t.get)(f)}}),v={stake_unstakeModal_balance:void 0},h=(0,r.cn)({key:"stake_unstakeModal_input",default:v}),b=(0,r.nZ)({key:"stake_unstakeModal_input_state",get:function(t){return(0,t.get)(h)}}),g={stake_updateModal_period:s,stake_updateModal_ltos_balance:void 0,stake_updateModal_tos_balance:void 0},m=(0,r.cn)({key:"stake_updateModal_input",default:g}),y=(0,r.nZ)({key:"stake_updateModal_input_state",get:function(t){return(0,t.get)(m)}}),k={stake_relockModal_period:s,stake_relockModal_ltos_balance:void 0,stake_relockModal_tos_balance:void 0},_=(0,r.cn)({key:"stake_relockModal_input",default:k}),x=(0,r.nZ)({key:"stake_relockModal_input_state",get:function(t){return(0,t.get)(_)}});function S(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function M(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,o=[],u=!0,i=!1;try{for(n=n.call(t);!(u=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);u=!0);}catch(l){i=!0,a=l}finally{try{u||null==n.return||n.return()}finally{if(i)throw a}}return o}}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return S(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var V=function(t){var e=(0,r.sJ)(p),n=M((0,r.FV)(f),2),a=n[0],o=n[1],u=(0,r.rb)(f),i=(0,r.sJ)(y),l=M((0,r.FV)(m),2),c=l[0],s=l[1],d=(0,r.rb)(m),v=(0,r.sJ)(b),g=M((0,r.FV)(h),2),k=g[0],S=g[1],V=(0,r.rb)(h),w=(0,r.sJ)(x),I=M((0,r.FV)(_),2),A=I[0],j=I[1],Z=(0,r.rb)(_);switch(t){case"stake_modal":return{inputValue:e,value:a,setValue:o,resetValue:u};case"update_modal":return{inputValue:i,value:c,setValue:s,resetValue:d};case"unstake_modal":return{inputValue:v,value:k,setValue:S,resetValue:V};case"relock_modal":return{inputValue:w,value:A,setValue:j,resetValue:Z};default:return{inputValue:void 0,value:void 0,setValue:void 0,resetValue:void 0}}};var w=function(t,e){var n=V(e),r=n.inputValue,a=n.value,o=n.setValue,u=n.resetValue,i=c(e),l=i.inputValue,s=i.value,d=i.setValue,f=i.resetValue;switch(t){case"Stake_screen":return{inputValue:r,value:a,setValue:o,setResetValue:u};case"Bond_screen":return{inputValue:l,value:s,setValue:d,setResetValue:f};default:return{inputValue:void 0,value:void 0,setValue:void 0}}}},45379:function(t,e,n){"use strict";var r=n(88586),a=n(67294),o=n(5555);e.Z=function(t){var e=(0,a.useState)("-"),n=e[0],u=e[1],i=r.Z.rebase,l=i.epochLength,c=i.beginEpochEnd;return(0,a.useEffect)((function(){setInterval((function(){var e=(0,o.kv)(),n=l-(e-c)%l,r=(0,o.g9)(e-c>0?n:c-e,"HH:mm:ss"),a=r.hours,i=r.mins,s=r.secs,d=1===a.toString().length?"0".concat(r.hours):"".concat(r.hours),f=1===i.toString().length?"0".concat(r.mins):"".concat(r.mins),p=1===s.toString().length?"0".concat(r.secs):"".concat(r.secs);return(0,o.Ze)(),u(t?"".concat(d).concat(t).concat(f).concat(t).concat(p):"".concat(d,".").concat(f,".").concat(p))}),1e3)}),[]),n}},43382:function(t,e,n){"use strict";var r=n(34051),a=n.n(r),o=n(79102),u=n(77044),i=n(67294),l=n(28450),c=n(83077),s=n(68462);function d(t,e,n,r,a,o,u){try{var i=t[o](u),l=i.value}catch(c){return void n(c)}i.done?e(l):Promise.resolve(l).then(r,a)}function f(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function u(t){d(o,r,a,u,i,"next",t)}function i(t){d(o,r,a,u,i,"throw",t)}u(void 0)}))}}e.Z=function(){var t=(0,i.useState)({tosAllowance:void 0,stakeList:void 0,simpleStakingId:void 0}),e=t[0],n=t[1],r=(0,s.Z)().TOS_CONTRACT,d=(0,u.Ge)().account,p=l.Z.StakingV2Proxy,v=(0,c.O)().blockNumber,h=(0,s.Z)().StakingV2Proxy_CONTRACT;return(0,i.useEffect)((function(){function t(){return(t=f(a().mark((function t(){var e,u,i;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r&&d&&h)){t.next=9;break}return t.next=4,r.allowance(d,p);case 4:return u=t.sent,t.next=7,h.stakingOf(d);case 7:return i=t.sent,t.abrupt("return",n({tosAllowance:Number((0,o.WN)({amount:u.toString()})),stakeList:i,simpleStakingId:null===(e=i[1])||void 0===e?void 0:e.toString()}));case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}(function(){return t.apply(this,arguments)})().then((function(t){void 0!==t&&(console.log("**fetchUseUser err**"),console.log(t))}))}),[r,d,p,v,h]),e}},98253:function(t,e,n){"use strict";n.r(e);var r=n(85893),a=n(93717);e.default=function(){return(0,r.jsx)(a.k,{w:"100%",h:"100%",className:"gradient"})}},50482:function(t,e,n){"use strict";n.r(e);var r=n(85893),a=n(45161),o=n(18618),u=n(57747),i=n(93717),l=n(71293),c=n(95787),s=n(37243),d=n(98253);function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function p(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,o=[],u=!0,i=!1;try{for(n=n.call(t);!(u=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);u=!0);}catch(l){i=!0,a=l}finally{try{u||null==n.return||n.return()}finally{if(i)throw a}}return o}}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return f(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}e.default=function(t){var e=t.title,n=t.content,f=t.symbol,v=t.tooltip,h=t.isWarning,b=(0,a.If)().colorMode,g=p((0,o.a)("(max-width: 1024px)"),1)[0],m=(0,s.Z)().isModalLoading;return(0,r.jsxs)(u.xu,{display:"flex",flexDir:"column",w:g?"155px":"152px",alignItems:"center",mb:"15px",children:[(0,r.jsxs)(i.k,{alignItems:"center",mb:"6px",children:[(0,r.jsx)(l.x,{color:"dark"===b?"gray.100":"gray.1000",h:"17px",fontWeight:600,fontSize:12,textAlign:"center",mr:"6px",children:e}),(0,r.jsx)(c.Z,{label:v})]}),(0,r.jsx)(i.k,{fontWeight:600,justifyContent:"center",h:g?"28px":"25px",children:m?(0,r.jsx)(i.k,{w:"100px",h:"30px",children:(0,r.jsx)(d.default,{})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.x,{color:h?"red.100":"dark"===b?"white.100":"gray.800",fontSize:18,mr:2,children:n||"-"}),(0,r.jsx)(l.x,{color:"dark"===b?"white.200":"gray.800",fontSize:12,lineHeight:"33px",children:f||""})]})})]})}},45093:function(t,e){"use strict";e.Z=function(t,e){if(void 0===t||null===t)return"-";if(isNaN(t))return"-";if(0===t||"0"===t)return e?"0.".concat("0".repeat(e)):"0.00";var n=t.toString().split(".");return n[0].length>=4&&(n[0]=n[0].replace(/(\d)(?=(\d{3})+$)/g,"$1,")),n[1]&&n[1].length>=2&&(n[1]=n[1].slice(0,e||2)),void 0===n[1]&&(n[1]="".concat("0".repeat(null!==e&&void 0!==e?e:2))),n.join(".").replaceAll(" ","")}},5555:function(t,e,n){"use strict";n.d(e,{V4:function(){return v},Ze:function(){return p},ab:function(){return d},df:function(){return l},g9:function(){return f},kv:function(){return c},vI:function(){return s}});var r=n(88586),a=n(30381),o=n.n(a),u=n(80008),i=n.n(u);function l(t,e){return o().unix(t).format(e||"YYYY.MM.D")}function c(){return o()().unix()}function s(t){return t-c()<0}function d(t,e,n,r){return o().unix(t).add(e,"d").format(n||"MM.DD HH:mm:ss")}function f(t,e){var n=3600,r=86400,a=Math.floor(t/r),o=Math.floor((t-r*a)/n),u=Math.floor((t-r*a-n*o)/60);return{days:a,hours:o,mins:u,secs:t-r*a-n*o-60*u}}function p(){var t=i().tz(i().tz.guess()).format("Z").toString().split(":")[0].replaceAll("0","");return"UTC".concat(t)}function v(t){var e=t.currentEndTimeStamp,n=r.Z.LOCKTOS_epochUnit,a=e-c(),o=a/n,u=(a-604800*Math.floor(o))/86400,i=a-604800*Math.floor(o)-86400*Math.floor(u),l=f(i).hours,s=f(i).mins,d=1===l.toString().length?"0".concat(l):"".concat(l),p=1===s.toString().length?"0".concat(s):"".concat(s);return{leftWeeks:Math.floor(o).toString(),leftDays:String(Math.floor(u)),leftHourAndMin:"".concat(d,":").concat(p)}}}},function(t){t.O(0,[4885,2678,8658,8555,246,7756,2498,9774,2888,179],(function(){return e=7751,t(t.s=e);var e}));var e=t.O();_N_E=e}]);