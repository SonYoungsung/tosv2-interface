(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7119],{49417:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/components/stake/UpdateModalAfterEndTime",function(){return n(38091)}])},31617:function(t,e,n){"use strict";var o=n(34051),r=n.n(o),a=n(45093),s=n(79102),u=n(2593),i=n(89406),l=n(68462),c=n(60938),d=n(37243),f=n(67294),p=n(74506);function v(t,e,n,o,r,a,s){try{var u=t[a](s),i=u.value}catch(l){return void n(l)}u.done?e(i):Promise.resolve(i).then(o,r)}function k(t){return function(){var e=this,n=arguments;return new Promise((function(o,r){var a=t.apply(e,n);function s(t){v(a,o,r,s,u,"next",t)}function u(t){v(a,o,r,s,u,"throw",t)}s(void 0)}))}}e.Z=function(t){var e=(0,f.useState)("-"),n=e[0],o=e[1],v=(0,f.useState)("-"),_=v[0],m=v[1],b=(0,f.useState)(void 0),S=b[0],g=b[1],T=(0,f.useState)(void 0),x=T[0],h=T[1],w=(0,l.Z)(),N=w.StakingV2Proxy_CONTRACT,A=(w.LockTOS_CONTRACT,(0,i.Z)().stakeId),P=(0,c.Z)("Stake_screen","relock_modal").inputValue,y=(0,f.useState)(0),E=y[0],L=y[1],O=(0,p.Z)(E,P.stake_relockModal_period),Z=O.stosReward,C=O.newEndTime,M=(0,d.Z)(),I=M.selectedModalData;return M.selectedModal,(0,f.useEffect)((function(){function t(){return(t=k(r().mark((function t(){var e,n,o,a,u,i,l,c;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!((null===I||void 0===I?void 0:I.ltosAmount)&&(null===P||void 0===P?void 0:P.stake_relockModal_ltos_balance)&&N)){t.next=15;break}return e=I.ltosAmount,n=Number(e.replaceAll(",",""))-Number(P.stake_relockModal_ltos_balance.replaceAll(",","")),o=(0,s.Az)(n.toString()),t.next=6,N.getLtosToTosPossibleIndex(o);case 6:return a=t.sent,u=(0,s.WN)({amount:a.toString(),localeString:!0,round:!1}),m(null!==u&&void 0!==u?u:"-"),i=(0,s.Az)(e.toString()),t.next=12,N.getLtosToTosPossibleIndex(i);case 12:l=t.sent,c=(0,s.WN)({amount:l.toString(),localeString:!0,round:!1}),g(Number(null===c||void 0===c?void 0:c.replaceAll(",","")));case 15:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[null===I||void 0===I?void 0:I.ltosAmount,null===P||void 0===P?void 0:P.stake_relockModal_ltos_balance,N]),(0,f.useEffect)((function(){function e(){return(e=k(r().mark((function e(){var n,a,i,l,c,d,f,p,v,k;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(N&&A&&P)){e.next=28;break}if(t){e.next=10;break}return n=(0,s.Az)(String(P.stake_relockModal_ltos_balance).replaceAll(" ","")),e.next=5,N.getLtosToTosPossibleIndex(n);case 5:return a=e.sent,i=(0,s.WN)({amount:a.toString(),localeString:!0})||"-",o(i),L(Number(i.replaceAll(",",""))),e.abrupt("return");case 10:if(!t){e.next=28;break}return l=(0,s.Az)(P.stake_relockModal_tos_balance),e.next=14,N.getTosToLtosPossibleIndex(l);case 14:return c=e.sent,e.next=17,N.remainedLtos(A);case 17:return d=e.sent,f=u.O$.from(c).add(d),p=(0,s.WN)({amount:f.toString(),localeString:!0,round:!1})||"-",e.next=22,N.getLtosToTosPossibleIndex(f);case 22:return v=e.sent,k=(0,s.WN)({amount:v.toString(),localeString:!0,round:!1})||"-",o(k),L(Number(P.stake_relockModal_tos_balance.replaceAll(",",""))),h(p),e.abrupt("return");case 28:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(function(){return e.apply(this,arguments)})().catch((function(t){}))}),[A,N,P,Z,t]),{newEndTime:C,inputTosAmount:(0,a.Z)(E),tosValue:n,tosBalance:_,allLtosToTosBalance:S,allLtosBalance:x}}},43382:function(t,e,n){"use strict";var o=n(34051),r=n.n(o),a=n(79102),s=n(77044),u=n(67294),i=n(28450),l=n(83077),c=n(68462);function d(t,e,n,o,r,a,s){try{var u=t[a](s),i=u.value}catch(l){return void n(l)}u.done?e(i):Promise.resolve(i).then(o,r)}function f(t){return function(){var e=this,n=arguments;return new Promise((function(o,r){var a=t.apply(e,n);function s(t){d(a,o,r,s,u,"next",t)}function u(t){d(a,o,r,s,u,"throw",t)}s(void 0)}))}}e.Z=function(){var t=(0,u.useState)({tosAllowance:void 0,stakeList:void 0,simpleStakingId:void 0}),e=t[0],n=t[1],o=(0,c.Z)().TOS_CONTRACT,d=(0,s.Ge)().account,p=i.Z.StakingV2Proxy,v=(0,l.O)().blockNumber,k=(0,c.Z)().StakingV2Proxy_CONTRACT;return(0,u.useEffect)((function(){function t(){return(t=f(r().mark((function t(){var e,s,u;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(o&&d&&k)){t.next=9;break}return t.next=4,o.allowance(d,p);case 4:return s=t.sent,t.next=7,k.stakingOf(d);case 7:return u=t.sent,t.abrupt("return",n({tosAllowance:Number((0,a.WN)({amount:s.toString()})),stakeList:u,simpleStakingId:null===(e=u[1])||void 0===e?void 0:e.toString()}));case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}(function(){return t.apply(this,arguments)})().then((function(t){void 0!==t&&(console.log("**fetchUseUser err**"),console.log(t))}))}),[o,d,p,v,k]),e}}},function(t){t.O(0,[4885,2678,8658,246,7277,9683,3942,7756,1129,8091,9774,2888,179],(function(){return e=49417,t(t.s=e);var e}));var e=t.O();_N_E=e}]);